define(["@grafana/data","react","@emotion/css","lodash","@grafana/ui","@grafana/runtime"],((e,t,r,i,n,s)=>(()=>{"use strict";var a={644:e=>{e.exports=r},305:t=>{t.exports=e},545:e=>{e.exports=s},388:e=>{e.exports=n},980:e=>{e.exports=i},650:e=>{e.exports=t}},o={};function l(e){var t=o[e];if(void 0!==t)return t.exports;var r=o[e]={exports:{}};return a[e](r,r.exports,l),r.exports}l.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return l.d(t,{a:t}),t},l.d=(e,t)=>{for(var r in t)l.o(t,r)&&!l.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},l.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),l.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),l.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var u={};return(()=>{l.r(u),l.d(u,{plugin:()=>sr});var e=l(305),t=l(650),r=l.n(t),i=l(644),n=l(980),s=l(388);const a=function(e){var r=(0,t.useRef)(e);return r.current=e,r},o={Breadcrumbs:{breadcrumb:e=>`data-testid ${e} breadcrumb`},TimePicker:{openButton:"data-testid TimePicker Open Button",fromField:"Time Range from field",toField:"Time Range to field",applyTimeRange:"data-testid TimePicker submit button",calendar:{label:"Time Range calendar",openButton:"Open time range calendar",closeButton:"Close time range Calendar"},absoluteTimeRangeTitle:"data-testid-absolute-time-range-narrow"},DataSourcePermissions:{form:()=>'form[name="addPermission"]',roleType:"Role to add new permission to",rolePicker:"Built-in role picker",permissionLevel:"Permission Level"},DataSource:{TestData:{QueryTab:{scenarioSelectContainer:"Test Data Query scenario select container",scenarioSelect:"Test Data Query scenario select",max:"TestData max",min:"TestData min",noise:"TestData noise",seriesCount:"TestData series count",spread:"TestData spread",startValue:"TestData start value",drop:"TestData drop values"}},DataSourceHttpSettings:{urlInput:"Datasource HTTP settings url"},Jaeger:{traceIDInput:"Trace ID"},Prometheus:{configPage:{exemplarsAddButton:"Add exemplar config button",internalLinkSwitch:"Internal link switch"},exemplarMarker:"Exemplar marker"}},Menu:{MenuComponent:e=>`${e} menu`,MenuGroup:e=>`${e} menu group`,MenuItem:e=>`${e} menu item`,SubMenu:{container:"SubMenu container",icon:"SubMenu icon"}},Panels:{Panel:{title:e=>`data-testid Panel header ${e}`,headerItems:e=>`Panel header item ${e}`,menuItems:e=>`data-testid Panel menu item ${e}`,menu:e=>`data-testid Panel menu ${e}`,containerByTitle:e=>`${e} panel`,headerCornerInfo:e=>`Panel header ${e}`,loadingBar:()=>"Panel loading bar",HoverWidget:{container:"data-testid hover-header-container",dragIcon:"data-testid drag-icon"}},Visualization:{Graph:{container:"Graph container",VisualizationTab:{legendSection:"Legend section"},Legend:{legendItemAlias:e=>`gpl alias ${e}`,showLegendSwitch:"gpl show legend"},xAxis:{labels:()=>"div.flot-x-axis > div.flot-tick-label"}},BarGauge:{value:"Bar gauge value",valueV2:"data-testid Bar gauge value"},PieChart:{svgSlice:"Pie Chart Slice"},Text:{container:()=>".markdown-html"},Table:{header:"table header",footer:"table-footer"}}},VizLegend:{seriesName:e=>`VizLegend series ${e}`},Drawer:{General:{title:e=>`Drawer title ${e}`,expand:"Drawer expand",contract:"Drawer contract",close:"Drawer close",rcContentWrapper:()=>".rc-drawer-content-wrapper"}},PanelEditor:{General:{content:"Panel editor content"},OptionsPane:{content:"Panel editor option pane content",select:"Panel editor option pane select",fieldLabel:e=>`${e} field property editor`},DataPane:{content:"Panel editor data pane content"},applyButton:"data-testid Apply changes and go back to dashboard",toggleVizPicker:"data-testid toggle-viz-picker",toggleVizOptions:"data-testid toggle-viz-options",toggleTableView:"toggle-table-view",measureButton:"show measure tools"},PanelInspector:{Data:{content:"Panel inspector Data content"},Stats:{content:"Panel inspector Stats content"},Json:{content:"Panel inspector Json content"},Query:{content:"Panel inspector Query content",refreshButton:"Panel inspector Query refresh button",jsonObjectKeys:()=>".json-formatter-key"}},Tab:{title:e=>`Tab ${e}`,active:()=>'[class*="-activeTabStyle"]'},RefreshPicker:{runButton:"RefreshPicker run button",intervalButton:"RefreshPicker interval button",runButtonV2:"data-testid RefreshPicker run button",intervalButtonV2:"data-testid RefreshPicker interval button"},QueryTab:{content:"Query editor tab content",queryInspectorButton:"Query inspector button",queryHistoryButton:"Rich history button",addQuery:"Query editor add query button"},QueryHistory:{queryText:"Query text"},QueryEditorRows:{rows:"Query editor row"},QueryEditorRow:{actionButton:e=>`${e}`,title:e=>`Query editor row title ${e}`,container:e=>`Query editor row ${e}`},AlertTab:{content:"Alert editor tab content"},Alert:{alert:e=>`Alert ${e}`,alertV2:e=>`data-testid Alert ${e}`},TransformTab:{content:"Transform editor tab content",newTransform:e=>`New transform ${e}`,transformationEditor:e=>`Transformation editor ${e}`,transformationEditorDebugger:e=>`Transformation editor debugger ${e}`},Transforms:{card:e=>`New transform ${e}`,Reduce:{modeLabel:"Transform mode label",calculationsLabel:"Transform calculations label"},SpatialOperations:{actionLabel:"root Action field property editor",locationLabel:"root Location field property editor",location:{autoOption:"Auto location option",coords:{option:"Coords location option",latitudeFieldLabel:"root Latitude field field property editor",longitudeFieldLabel:"root Longitude field field property editor"},geohash:{option:"Geohash location option",geohashFieldLabel:"root Geohash field field property editor"},lookup:{option:"Lookup location option",lookupFieldLabel:"root Lookup field field property editor",gazetteerFieldLabel:"root Gazetteer field property editor"}}},searchInput:"search transformations"},NavBar:{Configuration:{button:"Configuration"},Toggle:{button:"Toggle menu"},Reporting:{button:"Reporting"}},NavMenu:{item:"data-testid Nav menu item"},NavToolbar:{container:"data-testid Nav toolbar"},PageToolbar:{container:()=>".page-toolbar",item:e=>`${e}`,itemButton:e=>`data-testid ${e}`},QueryEditorToolbarItem:{button:e=>`QueryEditor toolbar item button ${e}`},BackButton:{backArrow:"Go Back"},OptionsGroup:{group:e=>e?`Options group ${e}`:"Options group",toggle:e=>e?`Options group ${e} toggle`:"Options group toggle"},PluginVisualization:{item:e=>`Plugin visualization item ${e}`,current:()=>'[class*="-currentVisualizationItem"]'},Select:{option:"Select option",input:()=>'input[id*="time-options-input"]',singleValue:()=>'div[class*="-singleValue"]'},FieldConfigEditor:{content:"Field config editor content"},OverridesConfigEditor:{content:"Field overrides editor content"},FolderPicker:{container:"Folder picker select container",containerV2:"data-testid Folder picker select container",input:"Select a folder"},ReadonlyFolderPicker:{container:"data-testid Readonly folder picker select container"},DataSourcePicker:{container:"data-testid Data source picker select container",input:()=>'input[id="data-source-picker"]',inputV2:"Select a data source"},TimeZonePicker:{container:"Time zone picker select container",containerV2:"data-testid Time zone picker select container"},WeekStartPicker:{container:"Choose starting day of the week",containerV2:"data-testid Choose starting day of the week",placeholder:"Choose starting day of the week"},TraceViewer:{spanBar:"data-testid SpanBar--wrapper"},QueryField:{container:"Query field"},QueryBuilder:{queryPatterns:"Query patterns",labelSelect:"Select label",valueSelect:"Select value",matchOperatorSelect:"Select match operator"},ValuePicker:{button:e=>`Value picker button ${e}`,select:e=>`Value picker select ${e}`},Search:{section:"Search section",sectionV2:"data-testid Search section",items:"Search items",itemsV2:"data-testid Search items",cards:"data-testid Search cards",collapseFolder:e=>`data-testid Collapse folder ${e}`,expandFolder:e=>`data-testid Expand folder ${e}`,dashboardItem:e=>`${o.Search.dashboardItems} ${e}`,dashboardCard:e=>`data-testid Search card ${e}`,folderHeader:e=>`data-testid Folder header ${e}`,folderContent:e=>`data-testid Folder content ${e}`,dashboardItems:"data-testid Dashboard search item"},DashboardLinks:{container:"data-testid Dashboard link container",dropDown:"data-testid Dashboard link dropdown",link:"data-testid Dashboard link"},LoadingIndicator:{icon:"Loading indicator"},CallToActionCard:{button:e=>`Call to action button ${e}`,buttonV2:e=>`data-testid Call to action button ${e}`},DataLinksContextMenu:{singleLink:"Data link"},CodeEditor:{container:"Code editor container"},DashboardImportPage:{textarea:"data-testid-import-dashboard-textarea",submit:"data-testid-load-dashboard"},ImportDashboardForm:{name:"data-testid-import-dashboard-title",submit:"data-testid-import-dashboard-submit"},PanelAlertTabContent:{content:"Unified alert editor tab content"},VisualizationPreview:{card:e=>`data-testid suggestion-${e}`},ColorSwatch:{name:"data-testid-colorswatch"},DashboardRow:{title:e=>`data-testid dashboard-row-title-${e}`},UserProfile:{profileSaveButton:"data-testid-user-profile-save",preferencesSaveButton:"data-testid-shared-prefs-save",orgsTable:"data-testid-user-orgs-table",sessionsTable:"data-testid-user-sessions-table"},FileUpload:{inputField:"data-testid-file-upload-input-field",fileNameSpan:"data-testid-file-upload-file-name"},DebugOverlay:{wrapper:"debug-overlay"},OrgRolePicker:{input:"Role"},AnalyticsToolbarButton:{button:"Dashboard insights"},Variables:{variableOption:"data-testid variable-option"},Annotations:{annotationsTypeInput:"annotations-type-input",annotationsChoosePanelInput:"choose-panels-input"}},h={pages:{Login:{url:"/login",username:"Username input field",password:"Password input field",submit:"Login button",skip:"Skip change password button"},Home:{url:"/"},DataSource:{name:"Data source settings page name input field",delete:"Data source settings page Delete button",readOnly:"Data source settings page read only message",saveAndTest:"data-testid Data source settings page Save and Test button",alert:"Data source settings page Alert"},DataSources:{url:"/datasources",dataSources:e=>`Data source list item ${e}`},EditDataSource:{url:e=>`/datasources/edit/${e}`,settings:"Datasource settings page basic settings"},AddDataSource:{url:"/datasources/new",dataSourcePlugins:e=>`Data source plugin item ${e}`,dataSourcePluginsV2:e=>`Add new data source ${e}`},ConfirmModal:{delete:"data-testid Confirm Modal Danger Button"},AddDashboard:{url:"/dashboard/new",itemButton:e=>`data-testid ${e}`,addNewPanel:"Add new panel",addNewRow:"Add new row",addNewPanelLibrary:"Add new panel from panel library"},Dashboard:{url:e=>`/d/${e}`,DashNav:{nav:"Dashboard navigation",navV2:"data-testid Dashboard navigation",publicDashboardTag:"data-testid public dashboard tag"},SubMenu:{submenu:"Dashboard submenu",submenuItem:"data-testid template variable",submenuItemLabels:e=>`data-testid Dashboard template variables submenu Label ${e}`,submenuItemValueDropDownValueLinkTexts:e=>`data-testid Dashboard template variables Variable Value DropDown value link text ${e}`,submenuItemValueDropDownDropDown:"Variable options",submenuItemValueDropDownOptionTexts:e=>`data-testid Dashboard template variables Variable Value DropDown option text ${e}`,Annotations:{annotationsWrapper:"data-testid annotation-wrapper",annotationLabel:e=>`data-testid Dashboard annotations submenu Label ${e}`,annotationToggle:e=>`data-testid Dashboard annotations submenu Toggle ${e}`}},Settings:{Actions:{close:"data-testid dashboard-settings-close"},General:{deleteDashBoard:"Dashboard settings page delete dashboard button",sectionItems:e=>`Dashboard settings section item ${e}`,saveDashBoard:"Dashboard settings aside actions Save button",saveAsDashBoard:"Dashboard settings aside actions Save As button",timezone:"Time zone picker select container",title:"Tab General"},Annotations:{List:{addAnnotationCTA:o.CallToActionCard.button("Add annotation query"),addAnnotationCTAV2:o.CallToActionCard.buttonV2("Add annotation query")},Settings:{name:"Annotations settings name input"},NewAnnotation:{panelFilterSelect:"data-testid annotations-panel-filter",showInLabel:"show-in-label",previewInDashboard:"data-testid annotations-preview"}},Variables:{List:{addVariableCTA:o.CallToActionCard.button("Add variable"),addVariableCTAV2:o.CallToActionCard.buttonV2("Add variable"),newButton:"Variable editor New variable button",table:"Variable editor Table",tableRowNameFields:e=>`Variable editor Table Name field ${e}`,tableRowDefinitionFields:e=>`Variable editor Table Definition field ${e}`,tableRowArrowUpButtons:e=>`Variable editor Table ArrowUp button ${e}`,tableRowArrowDownButtons:e=>`Variable editor Table ArrowDown button ${e}`,tableRowDuplicateButtons:e=>`Variable editor Table Duplicate button ${e}`,tableRowRemoveButtons:e=>`Variable editor Table Remove button ${e}`},Edit:{General:{headerLink:"Variable editor Header link",modeLabelNew:"Variable editor Header mode New",modeLabelEdit:"Variable editor Header mode Edit",generalNameInput:"Variable editor Form Name field",generalNameInputV2:"data-testid Variable editor Form Name field",generalTypeSelect:"Variable editor Form Type select",generalTypeSelectV2:"data-testid Variable editor Form Type select",generalLabelInput:"Variable editor Form Label field",generalLabelInputV2:"data-testid Variable editor Form Label field",generalHideSelect:"Variable editor Form Hide select",generalHideSelectV2:"data-testid Variable editor Form Hide select",selectionOptionsMultiSwitch:"Variable editor Form Multi switch",selectionOptionsIncludeAllSwitch:"Variable editor Form IncludeAll switch",selectionOptionsCustomAllInput:"Variable editor Form IncludeAll field",selectionOptionsCustomAllInputV2:"data-testid Variable editor Form IncludeAll field",previewOfValuesOption:"Variable editor Preview of Values option",submitButton:"Variable editor Submit button",applyButton:"data-testid Variable editor Apply button"},QueryVariable:{queryOptionsDataSourceSelect:o.DataSourcePicker.container,queryOptionsRefreshSelect:"Variable editor Form Query Refresh select",queryOptionsRefreshSelectV2:"data-testid Variable editor Form Query Refresh select",queryOptionsRegExInput:"Variable editor Form Query RegEx field",queryOptionsRegExInputV2:"data-testid Variable editor Form Query RegEx field",queryOptionsSortSelect:"Variable editor Form Query Sort select",queryOptionsSortSelectV2:"data-testid Variable editor Form Query Sort select",queryOptionsQueryInput:"Variable editor Form Default Variable Query Editor textarea",valueGroupsTagsEnabledSwitch:"Variable editor Form Query UseTags switch",valueGroupsTagsTagsQueryInput:"Variable editor Form Query TagsQuery field",valueGroupsTagsTagsValuesQueryInput:"Variable editor Form Query TagsValuesQuery field"},ConstantVariable:{constantOptionsQueryInput:"Variable editor Form Constant Query field",constantOptionsQueryInputV2:"data-testid Variable editor Form Constant Query field"},DatasourceVariable:{datasourceSelect:"data-testid datasource variable datasource type"},TextBoxVariable:{textBoxOptionsQueryInput:"Variable editor Form TextBox Query field",textBoxOptionsQueryInputV2:"data-testid Variable editor Form TextBox Query field"},CustomVariable:{customValueInput:"data-testid custom-variable-input"},IntervalVariable:{intervalsValueInput:"data-testid interval variable intervals input"}}}},Annotations:{marker:"data-testid annotation-marker"}},Dashboards:{url:"/dashboards",dashboards:e=>`Dashboard search item ${e}`},SaveDashboardAsModal:{newName:"Save dashboard title field",save:"Save dashboard button"},SaveDashboardModal:{save:"Dashboard settings Save Dashboard Modal Save button",saveVariables:"Dashboard settings Save Dashboard Modal Save variables checkbox",saveTimerange:"Dashboard settings Save Dashboard Modal Save timerange checkbox"},SharePanelModal:{linkToRenderedImage:"Link to rendered image"},ShareDashboardModal:{shareButton:"Share dashboard or panel",PublicDashboard:{Tab:"Tab Public dashboard",WillBePublicCheckbox:"data-testid public dashboard will be public checkbox",LimitedDSCheckbox:"data-testid public dashboard limited datasources checkbox",CostIncreaseCheckbox:"data-testid public dashboard cost may increase checkbox",PauseSwitch:"data-testid public dashboard pause switch",EnableAnnotationsSwitch:"data-testid public dashboard on off switch for annotations",CreateButton:"data-testid public dashboard create button",DeleteButton:"data-testid public dashboard delete button",CopyUrlInput:"data-testid public dashboard copy url input",CopyUrlButton:"data-testid public dashboard copy url button",TemplateVariablesWarningAlert:"data-testid public dashboard disabled template variables alert",UnsupportedDataSourcesWarningAlert:"data-testid public dashboard unsupported data sources alert",NoUpsertPermissionsWarningAlert:"data-testid public dashboard no upsert permissions alert",EnableTimeRangeSwitch:"data-testid public dashboard on off switch for time range",EmailSharingConfiguration:{Container:"data-testid email sharing config container",ShareType:"data-testid public dashboard share type",EmailSharingInput:"data-testid public dashboard email sharing input",EmailSharingInviteButton:"data-testid public dashboard email sharing invite button",EmailSharingList:"data-testid public dashboard email sharing list",DeleteEmail:"data-testid public dashboard delete email button",ReshareLink:"data-testid public dashboard reshare link button"}}},PublicDashboard:{page:"public-dashboard-page",NotAvailable:{container:"public-dashboard-not-available",title:"public-dashboard-title",pausedDescription:"public-dashboard-paused-description"}},RequestViewAccess:{form:"request-view-access-form",recipientInput:"request-view-access-recipient-input",submitButton:"request-view-access-submit-button"},Explore:{url:"/explore",General:{container:"data-testid Explore",graph:"Explore Graph",table:"Explore Table",scrollView:"data-testid explorer scroll view"}},SoloPanel:{url:e=>`/d-solo/${e}`},PluginsList:{page:"Plugins list page",list:"Plugins list",listItem:"Plugins list item",signatureErrorNotice:"Unsigned plugins notice"},PluginPage:{page:"Plugin page",signatureInfo:"Plugin signature info",disabledInfo:"Plugin disabled info"},PlaylistForm:{name:"Playlist name",interval:"Playlist interval",itemDelete:"Delete playlist item"},BrowseDashbards:{table:{row:e=>`data-testid ${e} row`,checkbox:e=>`data-testid ${e} checkbox`}},Search:{url:"/?search=openn",FolderView:{url:"/?search=open&layout=folders"}},PublicDashboards:{ListItem:{linkButton:"public-dashboard-link-button",configButton:"public-dashboard-configuration-button",trashcanButton:"public-dashboard-remove-button"}},UserListPage:{tabs:{allUsers:"data-testid all-users-tab",orgUsers:"data-testid org-users-tab",publicDashboardsUsers:"data-testid public-dashboards-users-tab",users:"data-testid users-tab"},org:{url:"/org/users"},admin:{url:"/admin/users"},publicDashboards:{container:"data-testid public-dashboards-users-list"},UserListAdminPage:{container:"data-testid user-list-admin-page"},UsersListPage:{container:"data-testid users-list-page"},UsersListPublicDashboardsPage:{container:"data-testid users-list-public-dashboards-page",DashboardsListModal:{listItem:e=>`data-testid dashboards-list-item-${e}`}}}},components:o};function c(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function d(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},i=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(i=i.concat(Object.getOwnPropertySymbols(r).filter((function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable})))),i.forEach((function(t){c(e,t,r[t])}))}return e}const p={codeLens:!1,contextmenu:!1,fixedOverflowWidgets:!0,folding:!1,fontSize:14,lineDecorationsWidth:8,lineNumbers:"off",minimap:{enabled:!1},overviewRulerBorder:!1,overviewRulerLanes:0,padding:{top:4,bottom:5},renderLineHighlight:"none",scrollbar:{vertical:"hidden",verticalScrollbarSize:8,horizontal:"hidden",horizontalScrollbarSize:0},scrollBeyondLastLine:!1,suggestFontSize:12,wordWrap:"on"},f=e=>{const n=(0,t.useRef)(null),{onBlur:o,onRunQuery:u,initialValue:c,placeholder:f,readOnly:O}=e,g=a(u),b=a(o),m=((e,t)=>({container:i.css`
      border-radius: ${e.shape.borderRadius()};
      border: 1px solid ${e.components.input.borderColor};
    `,placeholder:i.css`
      ::after {
        content: '${t}';
        font-family: ${e.typography.fontFamilyMonospace};
        opacity: 0.3;
      }
    `}))((0,s.useTheme2)(),f);return r().createElement("div",{"aria-label":h.components.QueryField.container,className:m.container,ref:n},r().createElement(s.ReactMonacoEditor,{options:(y=d({},p),P={readOnly:O},P=null!=P?P:{},Object.getOwnPropertyDescriptors?Object.defineProperties(y,Object.getOwnPropertyDescriptors(P)):function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);r.push.apply(r,i)}return r}(Object(P)).forEach((function(e){Object.defineProperty(y,e,Object.getOwnPropertyDescriptor(P,e))})),y),language:"promql",value:c,onMount:(e,t)=>{e.onDidBlurEditorWidget((()=>{b.current(e.getValue())}));const r=()=>{const t=n.current;if(null!==t){const r=e.getContentHeight();t.style.height=`${r+2}px`,t.style.width="100%";const i=t.clientWidth;e.layout({width:i,height:r})}};if(e.onDidContentSizeChange(r),r(),e.addAction({id:"execute-shift-enter",label:"Execute",keybindings:[t.KeyMod.Shift|t.KeyCode.Enter],run:()=>g.current(e.getValue()||"")}),e.addCommand(t.KeyMod.CtrlCmd|t.KeyCode.KeyK,(function(){l.g.dispatchEvent(new KeyboardEvent("keydown",{key:"k",metaKey:!0}))})),f){const r=[{range:new t.Range(1,1,1,1),contents:[{value:"**bold** _italics_ regular `code`"}],options:{className:m.placeholder,isWholeLine:!0}}];let i=[];const n=()=>{const t=e.getModel();if(!t)return;const n=0===t.getValueLength()?r:[];i=t.deltaDecorations(i,n)};n(),e.onDidChangeModelContent(n)}}}));var y,P},O=e=>r().createElement(t.Suspense,{fallback:null},r().createElement(f,e));function g(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}const b=e=>{const i=(0,t.useRef)(null),{runQueryOnBlur:n,onRunQuery:s,onChange:a}=e,o=function(e,t){if(null==e)return{};var r,i,n=function(e,t){if(null==e)return{};var r,i,n={},s=Object.keys(e);for(i=0;i<s.length;i++)r=s[i],t.indexOf(r)>=0||(n[r]=e[r]);return n}(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(i=0;i<s.length;i++)r=s[i],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}(e,["runQueryOnBlur","onRunQuery","onChange"]),l=e=>{i.current=e,a(e),s()};return r().createElement(O,function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},i=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(i=i.concat(Object.getOwnPropertySymbols(r).filter((function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable})))),i.forEach((function(t){g(e,t,r[t])}))}return e}({onRunQuery:l,onBlur:e=>{a(e),n&&e!==i.current&&l(e)}},o))};function m(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}const y=e=>{const{ExtraFieldElement:t,query:i,history:n,onRunQuery:s,onChange:a,"data-testid":o}=e;var l;return r().createElement(r().Fragment,null,r().createElement("div",{className:"gf-form-inline gf-form-inline--xs-view-flex-column flex-grow-1","data-testid":o},r().createElement("div",{className:"gf-form--grow flex-shrink-1 min-width-15"},r().createElement(b,{runQueryOnBlur:!1,history:null!=n?n:[],onChange:e=>{if(a){const n=(t=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},i=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(i=i.concat(Object.getOwnPropertySymbols(r).filter((function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable})))),i.forEach((function(t){m(e,t,r[t])}))}return e}({},i),r=null!=(r={expr:e})?r:{},Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);r.push.apply(r,i)}return r}(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))})),t);a(n)}var t,r},onRunQuery:s,initialValue:null!==(l=i.expr)&&void 0!==l?l:"",placeholder:"Enter a LogsQL queryâ€¦"}))),t)},P=e=>({wrapper:i.css`
      max-width: 100%;
    `,buttonGroup:i.css`
      border: 1px solid ${e.colors.border.medium};
      border-top: none;
      padding: ${e.spacing(.5,.5,.5,.5)};
      margin-bottom: ${e.spacing(.5)};
      display: flex;
      flex-grow: 1;
      justify-content: end;
      font-size: ${e.typography.bodySmall.fontSize};
    `,hint:i.css`
      color: ${e.colors.text.disabled};
      white-space: nowrap;
      cursor: help;
    `}),v=e=>{const{query:t,datasource:i,range:n,onRunQuery:a,onChange:o,data:l,app:u,history:h}=e,c=(0,s.useStyles2)(P);return r().createElement("div",{className:c.wrapper},r().createElement(y,{datasource:i,query:t,range:n,onRunQuery:a,onChange:o,history:h,data:l,app:u}))};var x,Q,$,w;function k(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function S(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},i=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(i=i.concat(Object.getOwnPropertySymbols(r).filter((function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable})))),i.forEach((function(t){k(e,t,r[t])}))}return e}function T(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);r.push.apply(r,i)}return r}(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))})),e}function X(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}!function(e){e.Backward="backward",e.Forward="forward"}(x||(x={})),function(e){e.DataSample="dataSample",e.LogsSample="logsSample",e.LogsVolume="logsVolume"}(Q||(Q={})),function(e){e.Instant="instant",e.Range="range",e.Stream="stream"}($||($={})),function(e){e.FILTER_FOR="FILTER_FOR",e.FILTER_OUT="FILTER_OUT"}(w||(w={}));const R=r().memo((i=>{const a=(0,s.useStyles2)(_),{onChange:o,onRunQuery:l,data:u,app:h,queries:c}=i,[d,p]=(0,t.useState)(!1),f=function(e){let t=e;return null==e.expr&&(t=T(S({},t),{expr:""})),null==e.queryType&&(t=T(S({},t),{queryType:$.Range})),t}(i.query);return(0,t.useEffect)((()=>{p(!1)}),[u]),r().createElement("div",{className:a.wrapper},r().createElement("div",{className:"flex-grow-1"},r().createElement(v,(O=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},i=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(i=i.concat(Object.getOwnPropertySymbols(r).filter((function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable})))),i.forEach((function(t){X(e,t,r[t])}))}return e}({},i),g={query:f,onChange:e=>{(0,n.isEqual)(e,i.query)||p(!0),o(e)},showExplain:!0},g=null!=g?g:{},Object.getOwnPropertyDescriptors?Object.defineProperties(O,Object.getOwnPropertyDescriptors(g)):function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);r.push.apply(r,i)}return r}(Object(g)).forEach((function(e){Object.defineProperty(O,e,Object.getOwnPropertyDescriptor(g,e))})),O))),r().createElement("div",null,h!==e.CoreApp.Explore&&h!==e.CoreApp.Correlations&&r().createElement(s.Button,{variant:d?"primary":"secondary",size:"sm",onClick:l,icon:(null==u?void 0:u.state)===e.LoadingState.Loading?"fa fa-spinner":void 0,disabled:(null==u?void 0:u.state)===e.LoadingState.Loading},c&&c.length>1?"Run queries":"Run query")));var O,g})),_=e=>({wrapper:i.css`
      display: flex;
      align-items: flex-start;
      gap: ${e.spacing(1)};
    `});R.displayName="QueryEditor";const E=R,D=e=>r().createElement("div",null,"QueryEditorForAlerting"),j=t=>{const{app:i}=t;return i===e.CoreApp.CloudAlerting?r().createElement(D,t):r().createElement(E,t)},V=(0,t.memo)(j);var A=l(545);function C(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function q(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},i=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(i=i.concat(Object.getOwnPropertySymbols(r).filter((function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable})))),i.forEach((function(t){C(e,t,r[t])}))}return e}function I(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);r.push.apply(r,i)}return r}(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))})),e}function z({options:e,onOptionsChange:t}){return r().createElement("div",null,r().createElement(s.InlineField,{labelWidth:29,label:"Manage alert rules in Alerting UI",disabled:e.readOnly,tooltip:"Manage alert rules for this data source. To manage other alerting resources, add an Alertmanager data source."},r().createElement(s.InlineSwitch,{value:!1!==e.jsonData.manageAlerts,onChange:r=>t(I(q({},e),{jsonData:I(q({},e.jsonData),{manageAlerts:r.currentTarget.checked})}))})))}const L=[{title:"Datasource",url:"https://github.com/VictoriaMetrics/victorialogs-datasource"},{title:"VictoriaLogs",url:"https://docs.victoriametrics.com/victorialogs/"},{title:"LogsQL",url:"https://docs.victoriametrics.com/victorialogs/logsql/"},{title:"VictoriaMetrics",url:"https://victoriametrics.com/"}],F=()=>r().createElement(r().Fragment,null,r().createElement("h3",{className:"page-heading"},"Helpful links"),r().createElement("div",{className:"gf-form-group gf-form-inline markdown-html"},L.map((e=>r().createElement("a",{key:e.url,className:"gf-form-label gf-form-label--dashlink",href:e.url,target:"_blank",rel:"docs noreferrer"},e.title))))),B=e=>{const{maxLines:t,onMaxLinedChange:i}=e;return r().createElement("div",null,r().createElement(s.InlineField,{label:"Maximum lines",labelWidth:22,tooltip:r().createElement(r().Fragment,null,"VictoriaLogs queries must contain a limit of the maximum number of lines returned (default: 1000). Increase this limit to have a bigger result set for ad-hoc analysis. Decrease this limit if your browser becomes sluggish when displaying the log results.")},r().createElement(s.Input,{type:"number",value:t,onChange:e=>i(e.currentTarget.value),width:16,placeholder:"1000",spellCheck:!1})))};function U(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function N(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},i=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(i=i.concat(Object.getOwnPropertySymbols(r).filter((function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable})))),i.forEach((function(t){U(e,t,r[t])}))}return e}function W(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);r.push.apply(r,i)}return r}(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))})),e}const G=("maxLines",(e,t)=>W(N({},e),{jsonData:W(N({},e.jsonData),{maxLines:t})}));function Y(e){return"function"==typeof e}var M=function(e,t){return M=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},M(e,t)};function Z(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}M(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}function H(e){var t="function"==typeof Symbol&&Symbol.iterator,r=t&&e[t],i=0;if(r)return r.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&i>=e.length&&(e=void 0),{value:e&&e[i++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function J(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var i,n,s=r.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(i=s.next()).done;)a.push(i.value)}catch(e){n={error:e}}finally{try{i&&!i.done&&(r=s.return)&&r.call(s)}finally{if(n)throw n.error}}return a}function K(e,t,r){if(r||2===arguments.length)for(var i,n=0,s=t.length;n<s;n++)!i&&n in t||(i||(i=Array.prototype.slice.call(t,0,n)),i[n]=t[n]);return e.concat(i||Array.prototype.slice.call(t))}Object.create,Object.create;var ee,te=((ee=function(e){var t;t=this,Error.call(t),t.stack=(new Error).stack,this.message=e?e.length+" errors occurred during unsubscription:\n"+e.map((function(e,t){return t+1+") "+e.toString()})).join("\n  "):"",this.name="UnsubscriptionError",this.errors=e}).prototype=Object.create(Error.prototype),ee.prototype.constructor=ee,ee);function re(e,t){if(e){var r=e.indexOf(t);0<=r&&e.splice(r,1)}}var ie=function(){function e(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}var t;return e.prototype.unsubscribe=function(){var e,t,r,i,n;if(!this.closed){this.closed=!0;var s=this._parentage;if(s)if(this._parentage=null,Array.isArray(s))try{for(var a=H(s),o=a.next();!o.done;o=a.next())o.value.remove(this)}catch(t){e={error:t}}finally{try{o&&!o.done&&(t=a.return)&&t.call(a)}finally{if(e)throw e.error}}else s.remove(this);var l=this.initialTeardown;if(Y(l))try{l()}catch(e){n=e instanceof te?e.errors:[e]}var u=this._finalizers;if(u){this._finalizers=null;try{for(var h=H(u),c=h.next();!c.done;c=h.next()){var d=c.value;try{ne(d)}catch(e){n=null!=n?n:[],e instanceof te?n=K(K([],J(n)),J(e.errors)):n.push(e)}}}catch(e){r={error:e}}finally{try{c&&!c.done&&(i=h.return)&&i.call(h)}finally{if(r)throw r.error}}}if(n)throw new te(n)}},e.prototype.add=function(t){var r;if(t&&t!==this)if(this.closed)ne(t);else{if(t instanceof e){if(t.closed||t._hasParent(this))return;t._addParent(this)}(this._finalizers=null!==(r=this._finalizers)&&void 0!==r?r:[]).push(t)}},e.prototype._hasParent=function(e){var t=this._parentage;return t===e||Array.isArray(t)&&t.includes(e)},e.prototype._addParent=function(e){var t=this._parentage;this._parentage=Array.isArray(t)?(t.push(e),t):t?[t,e]:e},e.prototype._removeParent=function(e){var t=this._parentage;t===e?this._parentage=null:Array.isArray(t)&&re(t,e)},e.prototype.remove=function(t){var r=this._finalizers;r&&re(r,t),t instanceof e&&t._removeParent(this)},e.EMPTY=((t=new e).closed=!0,t),e}();function ne(e){Y(e)?e():e.unsubscribe()}ie.EMPTY;var se=null,ae=null,oe=!1,le=!1,ue={setTimeout:function(e,t){for(var r=[],i=2;i<arguments.length;i++)r[i-2]=arguments[i];var n=ue.delegate;return(null==n?void 0:n.setTimeout)?n.setTimeout.apply(n,K([e,t],J(r))):setTimeout.apply(void 0,K([e,t],J(r)))},clearTimeout:function(e){var t=ue.delegate;return((null==t?void 0:t.clearTimeout)||clearTimeout)(e)},delegate:void 0};function he(){}var ce=de("C",void 0,void 0);function de(e,t,r){return{kind:e,value:t,error:r}}var pe=function(e){function t(t){var r,i=e.call(this)||this;return i.isStopped=!1,t?(i.destination=t,((r=t)instanceof ie||r&&"closed"in r&&Y(r.remove)&&Y(r.add)&&Y(r.unsubscribe))&&t.add(i)):i.destination=Pe,i}return Z(t,e),t.create=function(e,t,r){return new be(e,t,r)},t.prototype.next=function(e){this.isStopped?ye(function(e){return de("N",e,void 0)}(e),this):this._next(e)},t.prototype.error=function(e){this.isStopped?ye(de("E",void 0,e),this):(this.isStopped=!0,this._error(e))},t.prototype.complete=function(){this.isStopped?ye(ce,this):(this.isStopped=!0,this._complete())},t.prototype.unsubscribe=function(){this.closed||(this.isStopped=!0,e.prototype.unsubscribe.call(this),this.destination=null)},t.prototype._next=function(e){this.destination.next(e)},t.prototype._error=function(e){try{this.destination.error(e)}finally{this.unsubscribe()}},t.prototype._complete=function(){try{this.destination.complete()}finally{this.unsubscribe()}},t}(ie),fe=Function.prototype.bind;function Oe(e,t){return fe.call(e,t)}var ge=function(){function e(e){this.partialObserver=e}return e.prototype.next=function(e){var t=this.partialObserver;if(t.next)try{t.next(e)}catch(e){me(e)}},e.prototype.error=function(e){var t=this.partialObserver;if(t.error)try{t.error(e)}catch(e){me(e)}else me(e)},e.prototype.complete=function(){var e=this.partialObserver;if(e.complete)try{e.complete()}catch(e){me(e)}},e}(),be=function(e){function t(t,r,i){var n,s,a=e.call(this)||this;return Y(t)||!t?n={next:null!=t?t:void 0,error:null!=r?r:void 0,complete:null!=i?i:void 0}:a&&le?((s=Object.create(t)).unsubscribe=function(){return a.unsubscribe()},n={next:t.next&&Oe(t.next,s),error:t.error&&Oe(t.error,s),complete:t.complete&&Oe(t.complete,s)}):n=t,a.destination=new ge(n),a}return Z(t,e),t}(pe);function me(e){oe||function(e){ue.setTimeout((function(){if(!se)throw e;se(e)}))}(e)}function ye(e,t){var r=ae;r&&ue.setTimeout((function(){return r(e,t)}))}var Pe={closed:!0,next:he,error:function(e){throw e},complete:he},ve=function(e){function t(t,r,i,n,s,a){var o=e.call(this,t)||this;return o.onFinalize=s,o.shouldUnsubscribe=a,o._next=r?function(e){try{r(e)}catch(e){t.error(e)}}:e.prototype._next,o._error=n?function(e){try{n(e)}catch(e){t.error(e)}finally{this.unsubscribe()}}:e.prototype._error,o._complete=i?function(){try{i()}catch(e){t.error(e)}finally{this.unsubscribe()}}:e.prototype._complete,o}return Z(t,e),t.prototype.unsubscribe=function(){var t;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){var r=this.closed;e.prototype.unsubscribe.call(this),!r&&(null===(t=this.onFinalize)||void 0===t||t.call(this))}},t}(pe);function xe(e,t){return r=function(r,i){var n=0;r.subscribe(new ve(i,(function(r){i.next(e.call(t,r,n++))}),void 0,void 0,void 0))},function(e){if(function(e){return Y(null==e?void 0:e.lift)}(e))return e.lift((function(e){try{return r(e,this)}catch(e){this.error(e)}}));throw new TypeError("Unable to lift unknown Observable type")};var r}function Qe(t){const r=(0,A.getDataSourceSrv)(),i=t.reduce(((e,t)=>{if(t.datasourceUid){const n=r.getInstanceSettings(t.datasourceUid),s=e=>{switch(e){case"tempo":return"traceql";case"grafana-x-ray-datasource":return"getTrace";default:return}};var i;e.push({title:t.urlDisplayLabel||"",url:"",internal:{query:{query:t.url,queryType:s(null==n?void 0:n.type)},datasourceUid:t.datasourceUid,datasourceName:null!==(i=null==n?void 0:n.name)&&void 0!==i?i:"Data source not found"}})}else t.url&&e.push({title:t.urlDisplayLabel||"",url:t.url});return e}),[]);return{name:t[0].name,type:e.FieldType.string,config:{links:i},values:[]}}function $e(t){const r=t.filter((e=>void 0!==e.refId)),i=(0,n.groupBy)(r,(e=>e.refId));return Object.entries(i).map((([t,r])=>function(t,r){const i={name:"Time",config:{},values:[],type:e.FieldType.time},n={name:`Value #${r}`,config:{},values:[],type:e.FieldType.number},s=new Set(t.map((e=>e.fields.map((e=>{var t;return Object.keys(null!==(t=e.labels)&&void 0!==t?t:{})})).flat())).flat()),a=Array.from(s).sort().map((t=>({name:t,config:{filterable:!0},values:[],type:e.FieldType.string})));return t.forEach((t=>{const r=t.fields.find((t=>t.type===e.FieldType.time)),s=t.fields.find((t=>t.type===e.FieldType.number));if(null==r||null==s)return;const o=r.values,l=s.values;for(let e of o)i.values.push(e);for(let e of l)n.values.push(e);var u;const h=null!==(u=s.labels)&&void 0!==u?u:{};for(let e of a){var c;const t=null!==(c=h[e.name])&&void 0!==c?c:"";for(let r=0;r<l.length;r++)e.values.push(t)}})),{fields:[i,...a,n],refId:r,meta:{preferredVisualisationType:"table"},length:i.values.length}}(r,t)))}const we=1024;let ke=0;class Se{constructor(e,t){this.from=e,this.to=t}}class Te{constructor(e={}){this.id=ke++,this.perNode=!!e.perNode,this.deserialize=e.deserialize||(()=>{throw new Error("This node type doesn't define a deserialize function")})}add(e){if(this.perNode)throw new RangeError("Can't add per-node props to node types");return"function"!=typeof e&&(e=_e.match(e)),t=>{let r=e(t);return void 0===r?null:[this,r]}}}Te.closedBy=new Te({deserialize:e=>e.split(" ")}),Te.openedBy=new Te({deserialize:e=>e.split(" ")}),Te.group=new Te({deserialize:e=>e.split(" ")}),Te.isolate=new Te({deserialize:e=>{if(e&&"rtl"!=e&&"ltr"!=e&&"auto"!=e)throw new RangeError("Invalid value for isolate: "+e);return e||"auto"}}),Te.contextHash=new Te({perNode:!0}),Te.lookAhead=new Te({perNode:!0}),Te.mounted=new Te({perNode:!0});class Xe{constructor(e,t,r){this.tree=e,this.overlay=t,this.parser=r}static get(e){return e&&e.props&&e.props[Te.mounted.id]}}const Re=Object.create(null);class _e{constructor(e,t,r,i=0){this.name=e,this.props=t,this.id=r,this.flags=i}static define(e){let t=e.props&&e.props.length?Object.create(null):Re,r=(e.top?1:0)|(e.skipped?2:0)|(e.error?4:0)|(null==e.name?8:0),i=new _e(e.name||"",t,e.id,r);if(e.props)for(let r of e.props)if(Array.isArray(r)||(r=r(i)),r){if(r[0].perNode)throw new RangeError("Can't store a per-node prop on a node type");t[r[0].id]=r[1]}return i}prop(e){return this.props[e.id]}get isTop(){return(1&this.flags)>0}get isSkipped(){return(2&this.flags)>0}get isError(){return(4&this.flags)>0}get isAnonymous(){return(8&this.flags)>0}is(e){if("string"==typeof e){if(this.name==e)return!0;let t=this.prop(Te.group);return!!t&&t.indexOf(e)>-1}return this.id==e}static match(e){let t=Object.create(null);for(let r in e)for(let i of r.split(" "))t[i]=e[r];return e=>{for(let r=e.prop(Te.group),i=-1;i<(r?r.length:0);i++){let n=t[i<0?e.name:r[i]];if(n)return n}}}}_e.none=new _e("",Object.create(null),0,8);class Ee{constructor(e){this.types=e;for(let t=0;t<e.length;t++)if(e[t].id!=t)throw new RangeError("Node type ids should correspond to array positions when creating a node set")}extend(...e){let t=[];for(let r of this.types){let i=null;for(let t of e){let e=t(r);e&&(i||(i=Object.assign({},r.props)),i[e[0].id]=e[1])}t.push(i?new _e(r.name,i,r.id,r.flags):r)}return new Ee(t)}}const De=new WeakMap,je=new WeakMap;var Ve;!function(e){e[e.ExcludeBuffers=1]="ExcludeBuffers",e[e.IncludeAnonymous=2]="IncludeAnonymous",e[e.IgnoreMounts=4]="IgnoreMounts",e[e.IgnoreOverlays=8]="IgnoreOverlays"}(Ve||(Ve={}));class Ae{constructor(e,t,r,i,n){if(this.type=e,this.children=t,this.positions=r,this.length=i,this.props=null,n&&n.length){this.props=Object.create(null);for(let[e,t]of n)this.props["number"==typeof e?e:e.id]=t}}toString(){let e=Xe.get(this);if(e&&!e.overlay)return e.tree.toString();let t="";for(let e of this.children){let r=e.toString();r&&(t&&(t+=","),t+=r)}return this.type.name?(/\W/.test(this.type.name)&&!this.type.isError?JSON.stringify(this.type.name):this.type.name)+(t.length?"("+t+")":""):t}cursor(e=0){return new Me(this.topNode,e)}cursorAt(e,t=0,r=0){let i=De.get(this)||this.topNode,n=new Me(i);return n.moveTo(e,t),De.set(this,n._tree),n}get topNode(){return new Fe(this,0,0,null)}resolve(e,t=0){let r=ze(De.get(this)||this.topNode,e,t,!1);return De.set(this,r),r}resolveInner(e,t=0){let r=ze(je.get(this)||this.topNode,e,t,!0);return je.set(this,r),r}resolveStack(e,t=0){return function(e,t,r){let i=e.resolveInner(t,r),n=null;for(let e=i instanceof Fe?i:i.context.parent;e;e=e.parent)if(e.index<0){let s=e.parent;(n||(n=[i])).push(s.resolve(t,r)),e=s}else{let s=Xe.get(e.tree);if(s&&s.overlay&&s.overlay[0].from<=t&&s.overlay[s.overlay.length-1].to>=t){let a=new Fe(s.tree,s.overlay[0].from+e.from,-1,e);(n||(n=[i])).push(ze(a,t,r,!1))}}return n?Ge(n):i}(this,e,t)}iterate(e){let{enter:t,leave:r,from:i=0,to:n=this.length}=e,s=e.mode||0,a=(s&Ve.IncludeAnonymous)>0;for(let e=this.cursor(s|Ve.IncludeAnonymous);;){let s=!1;if(e.from<=n&&e.to>=i&&(!a&&e.type.isAnonymous||!1!==t(e))){if(e.firstChild())continue;s=!0}for(;s&&r&&(a||!e.type.isAnonymous)&&r(e),!e.nextSibling();){if(!e.parent())return;s=!0}}}prop(e){return e.perNode?this.props?this.props[e.id]:void 0:this.type.prop(e)}get propValues(){let e=[];if(this.props)for(let t in this.props)e.push([+t,this.props[t]]);return e}balance(e={}){return this.children.length<=8?this:Ke(_e.none,this.children,this.positions,0,this.children.length,0,this.length,((e,t,r)=>new Ae(this.type,e,t,r,this.propValues)),e.makeTree||((e,t,r)=>new Ae(_e.none,e,t,r)))}static build(e){return function(e){var t;let{buffer:r,nodeSet:i,maxBufferLength:n=we,reused:s=[],minRepeatType:a=i.types.length}=e,o=Array.isArray(r)?new Ce(r,r.length):r,l=i.types,u=0,h=0;function c(e,t,r,g,b,m){let{id:y,start:P,end:v,size:x}=o,Q=h;for(;x<0;){if(o.next(),-1==x){let t=s[y];return r.push(t),void g.push(P-e)}if(-3==x)return void(u=y);if(-4==x)return void(h=y);throw new RangeError(`Unrecognized record size: ${x}`)}let $,w,k=l[y],S=P-e;if(v-P<=n&&(w=function(e,t){let r=o.fork(),i=0,s=0,l=0,u=r.end-n,h={size:0,start:0,skip:0};e:for(let n=r.pos-e;r.pos>n;){let e=r.size;if(r.id==t&&e>=0){h.size=i,h.start=s,h.skip=l,l+=4,i+=4,r.next();continue}let o=r.pos-e;if(e<0||o<n||r.start<u)break;let c=r.id>=a?4:0,d=r.start;for(r.next();r.pos>o;){if(r.size<0){if(-3!=r.size)break e;c+=4}else r.id>=a&&(c+=4);r.next()}s=d,i+=e,l+=c}return(t<0||i==e)&&(h.size=i,h.start=s,h.skip=l),h.size>4?h:void 0}(o.pos-t,b))){let t=new Uint16Array(w.size-w.skip),r=o.pos-w.size,n=t.length;for(;o.pos>r;)n=O(w.start,t,n);$=new qe(t,v-w.start,i),S=w.start-e}else{let e=o.pos-x;o.next();let t=[],r=[],i=y>=a?y:-1,s=0,l=v;for(;o.pos>e;)i>=0&&o.id==i&&o.size>=0?(o.end<=l-n&&(p(t,r,P,s,o.end,l,i,Q),s=t.length,l=o.end),o.next()):m>2500?d(P,e,t,r):c(P,e,t,r,i,m+1);if(i>=0&&s>0&&s<t.length&&p(t,r,P,s,P,l,i,Q),t.reverse(),r.reverse(),i>-1&&s>0){let e=function(e){return(t,r,i)=>{let n,s,a=0,o=t.length-1;if(o>=0&&(n=t[o])instanceof Ae){if(!o&&n.type==e&&n.length==i)return n;(s=n.prop(Te.lookAhead))&&(a=r[o]+n.length+s)}return f(e,t,r,i,a)}}(k);$=Ke(k,t,r,0,t.length,0,v-P,e,e)}else $=f(k,t,r,v-P,Q-v)}r.push($),g.push(S)}function d(e,t,r,s){let a=[],l=0,u=-1;for(;o.pos>t;){let{id:e,start:t,end:r,size:i}=o;if(i>4)o.next();else{if(u>-1&&t<u)break;u<0&&(u=r-n),a.push(e,t,r),l++,o.next()}}if(l){let t=new Uint16Array(4*l),n=a[a.length-2];for(let e=a.length-3,r=0;e>=0;e-=3)t[r++]=a[e],t[r++]=a[e+1]-n,t[r++]=a[e+2]-n,t[r++]=r;r.push(new qe(t,a[2]-n,i)),s.push(n-e)}}function p(e,t,r,n,s,a,o,l){let u=[],h=[];for(;e.length>n;)u.push(e.pop()),h.push(t.pop()+r-s);e.push(f(i.types[o],u,h,a-s,l-a)),t.push(s-r)}function f(e,t,r,i,n=0,s){if(u){let e=[Te.contextHash,u];s=s?[e].concat(s):[e]}if(n>25){let e=[Te.lookAhead,n];s=s?[e].concat(s):[e]}return new Ae(e,t,r,i,s)}function O(e,t,r){let{id:i,start:n,end:s,size:l}=o;if(o.next(),l>=0&&i<a){let a=r;if(l>4){let i=o.pos-(l-4);for(;o.pos>i;)r=O(e,t,r)}t[--r]=a,t[--r]=s-e,t[--r]=n-e,t[--r]=i}else-3==l?u=i:-4==l&&(h=i);return r}let g=[],b=[];for(;o.pos>0;)c(e.start||0,e.bufferStart||0,g,b,-1,0);let m=null!==(t=e.length)&&void 0!==t?t:g.length?b[0]+g[0].length:0;return new Ae(l[e.topID],g.reverse(),b.reverse(),m)}(e)}}Ae.empty=new Ae(_e.none,[],[],0);class Ce{constructor(e,t){this.buffer=e,this.index=t}get id(){return this.buffer[this.index-4]}get start(){return this.buffer[this.index-3]}get end(){return this.buffer[this.index-2]}get size(){return this.buffer[this.index-1]}get pos(){return this.index}next(){this.index-=4}fork(){return new Ce(this.buffer,this.index)}}class qe{constructor(e,t,r){this.buffer=e,this.length=t,this.set=r}get type(){return _e.none}toString(){let e=[];for(let t=0;t<this.buffer.length;)e.push(this.childString(t)),t=this.buffer[t+3];return e.join(",")}childString(e){let t=this.buffer[e],r=this.buffer[e+3],i=this.set.types[t],n=i.name;if(/\W/.test(n)&&!i.isError&&(n=JSON.stringify(n)),r==(e+=4))return n;let s=[];for(;e<r;)s.push(this.childString(e)),e=this.buffer[e+3];return n+"("+s.join(",")+")"}findChild(e,t,r,i,n){let{buffer:s}=this,a=-1;for(let o=e;o!=t&&!(Ie(n,i,s[o+1],s[o+2])&&(a=o,r>0));o=s[o+3]);return a}slice(e,t,r){let i=this.buffer,n=new Uint16Array(t-e),s=0;for(let a=e,o=0;a<t;){n[o++]=i[a++],n[o++]=i[a++]-r;let t=n[o++]=i[a++]-r;n[o++]=i[a++]-e,s=Math.max(s,t)}return new qe(n,s,this.set)}}function Ie(e,t,r,i){switch(e){case-2:return r<t;case-1:return i>=t&&r<t;case 0:return r<t&&i>t;case 1:return r<=t&&i>t;case 2:return i>t;case 4:return!0}}function ze(e,t,r,i){for(var n;e.from==e.to||(r<1?e.from>=t:e.from>t)||(r>-1?e.to<=t:e.to<t);){let t=!i&&e instanceof Fe&&e.index<0?null:e.parent;if(!t)return e;e=t}let s=i?0:Ve.IgnoreOverlays;if(i)for(let i=e,a=i.parent;a;i=a,a=i.parent)i instanceof Fe&&i.index<0&&(null===(n=a.enter(t,r,s))||void 0===n?void 0:n.from)!=i.from&&(e=a);for(;;){let i=e.enter(t,r,s);if(!i)return e;e=i}}class Le{cursor(e=0){return new Me(this,e)}getChild(e,t=null,r=null){let i=Be(this,e,t,r);return i.length?i[0]:null}getChildren(e,t=null,r=null){return Be(this,e,t,r)}resolve(e,t=0){return ze(this,e,t,!1)}resolveInner(e,t=0){return ze(this,e,t,!0)}matchContext(e){return Ue(this,e)}enterUnfinishedNodesBefore(e){let t=this.childBefore(e),r=this;for(;t;){let e=t.lastChild;if(!e||e.to!=t.to)break;e.type.isError&&e.from==e.to?(r=t,t=e.prevSibling):t=e}return r}get node(){return this}get next(){return this.parent}}class Fe extends Le{constructor(e,t,r,i){super(),this._tree=e,this.from=t,this.index=r,this._parent=i}get type(){return this._tree.type}get name(){return this._tree.type.name}get to(){return this.from+this._tree.length}nextChild(e,t,r,i,n=0){for(let s=this;;){for(let{children:a,positions:o}=s._tree,l=t>0?a.length:-1;e!=l;e+=t){let l=a[e],u=o[e]+s.from;if(Ie(i,r,u,u+l.length))if(l instanceof qe){if(n&Ve.ExcludeBuffers)continue;let a=l.findChild(0,l.buffer.length,t,r-u,i);if(a>-1)return new We(new Ne(s,l,e,u),null,a)}else if(n&Ve.IncludeAnonymous||!l.type.isAnonymous||Ze(l)){let a;if(!(n&Ve.IgnoreMounts)&&(a=Xe.get(l))&&!a.overlay)return new Fe(a.tree,u,e,s);let o=new Fe(l,u,e,s);return n&Ve.IncludeAnonymous||!o.type.isAnonymous?o:o.nextChild(t<0?l.children.length-1:0,t,r,i)}}if(n&Ve.IncludeAnonymous||!s.type.isAnonymous)return null;if(e=s.index>=0?s.index+t:t<0?-1:s._parent._tree.children.length,s=s._parent,!s)return null}}get firstChild(){return this.nextChild(0,1,0,4)}get lastChild(){return this.nextChild(this._tree.children.length-1,-1,0,4)}childAfter(e){return this.nextChild(0,1,e,2)}childBefore(e){return this.nextChild(this._tree.children.length-1,-1,e,-2)}enter(e,t,r=0){let i;if(!(r&Ve.IgnoreOverlays)&&(i=Xe.get(this._tree))&&i.overlay){let r=e-this.from;for(let{from:e,to:n}of i.overlay)if((t>0?e<=r:e<r)&&(t<0?n>=r:n>r))return new Fe(i.tree,i.overlay[0].from+this.from,-1,this)}return this.nextChild(0,1,e,t,r)}nextSignificantParent(){let e=this;for(;e.type.isAnonymous&&e._parent;)e=e._parent;return e}get parent(){return this._parent?this._parent.nextSignificantParent():null}get nextSibling(){return this._parent&&this.index>=0?this._parent.nextChild(this.index+1,1,0,4):null}get prevSibling(){return this._parent&&this.index>=0?this._parent.nextChild(this.index-1,-1,0,4):null}get tree(){return this._tree}toTree(){return this._tree}toString(){return this._tree.toString()}}function Be(e,t,r,i){let n=e.cursor(),s=[];if(!n.firstChild())return s;if(null!=r)for(let e=!1;!e;)if(e=n.type.is(r),!n.nextSibling())return s;for(;;){if(null!=i&&n.type.is(i))return s;if(n.type.is(t)&&s.push(n.node),!n.nextSibling())return null==i?s:[]}}function Ue(e,t,r=t.length-1){for(let i=e.parent;r>=0;i=i.parent){if(!i)return!1;if(!i.type.isAnonymous){if(t[r]&&t[r]!=i.name)return!1;r--}}return!0}class Ne{constructor(e,t,r,i){this.parent=e,this.buffer=t,this.index=r,this.start=i}}class We extends Le{get name(){return this.type.name}get from(){return this.context.start+this.context.buffer.buffer[this.index+1]}get to(){return this.context.start+this.context.buffer.buffer[this.index+2]}constructor(e,t,r){super(),this.context=e,this._parent=t,this.index=r,this.type=e.buffer.set.types[e.buffer.buffer[r]]}child(e,t,r){let{buffer:i}=this.context,n=i.findChild(this.index+4,i.buffer[this.index+3],e,t-this.context.start,r);return n<0?null:new We(this.context,this,n)}get firstChild(){return this.child(1,0,4)}get lastChild(){return this.child(-1,0,4)}childAfter(e){return this.child(1,e,2)}childBefore(e){return this.child(-1,e,-2)}enter(e,t,r=0){if(r&Ve.ExcludeBuffers)return null;let{buffer:i}=this.context,n=i.findChild(this.index+4,i.buffer[this.index+3],t>0?1:-1,e-this.context.start,t);return n<0?null:new We(this.context,this,n)}get parent(){return this._parent||this.context.parent.nextSignificantParent()}externalSibling(e){return this._parent?null:this.context.parent.nextChild(this.context.index+e,e,0,4)}get nextSibling(){let{buffer:e}=this.context,t=e.buffer[this.index+3];return t<(this._parent?e.buffer[this._parent.index+3]:e.buffer.length)?new We(this.context,this._parent,t):this.externalSibling(1)}get prevSibling(){let{buffer:e}=this.context,t=this._parent?this._parent.index+4:0;return this.index==t?this.externalSibling(-1):new We(this.context,this._parent,e.findChild(t,this.index,-1,0,4))}get tree(){return null}toTree(){let e=[],t=[],{buffer:r}=this.context,i=this.index+4,n=r.buffer[this.index+3];if(n>i){let s=r.buffer[this.index+1];e.push(r.slice(i,n,s)),t.push(0)}return new Ae(this.type,e,t,this.to-this.from)}toString(){return this.context.buffer.childString(this.index)}}function Ge(e){if(!e.length)return null;let t=0,r=e[0];for(let i=1;i<e.length;i++){let n=e[i];(n.from>r.from||n.to<r.to)&&(r=n,t=i)}let i=r instanceof Fe&&r.index<0?null:r.parent,n=e.slice();return i?n[t]=i:n.splice(t,1),new Ye(n,r)}class Ye{constructor(e,t){this.heads=e,this.node=t}get next(){return Ge(this.heads)}}class Me{get name(){return this.type.name}constructor(e,t=0){if(this.mode=t,this.buffer=null,this.stack=[],this.index=0,this.bufferNode=null,e instanceof Fe)this.yieldNode(e);else{this._tree=e.context.parent,this.buffer=e.context;for(let t=e._parent;t;t=t._parent)this.stack.unshift(t.index);this.bufferNode=e,this.yieldBuf(e.index)}}yieldNode(e){return!!e&&(this._tree=e,this.type=e.type,this.from=e.from,this.to=e.to,!0)}yieldBuf(e,t){this.index=e;let{start:r,buffer:i}=this.buffer;return this.type=t||i.set.types[i.buffer[e]],this.from=r+i.buffer[e+1],this.to=r+i.buffer[e+2],!0}yield(e){return!!e&&(e instanceof Fe?(this.buffer=null,this.yieldNode(e)):(this.buffer=e.context,this.yieldBuf(e.index,e.type)))}toString(){return this.buffer?this.buffer.buffer.childString(this.index):this._tree.toString()}enterChild(e,t,r){if(!this.buffer)return this.yield(this._tree.nextChild(e<0?this._tree._tree.children.length-1:0,e,t,r,this.mode));let{buffer:i}=this.buffer,n=i.findChild(this.index+4,i.buffer[this.index+3],e,t-this.buffer.start,r);return!(n<0)&&(this.stack.push(this.index),this.yieldBuf(n))}firstChild(){return this.enterChild(1,0,4)}lastChild(){return this.enterChild(-1,0,4)}childAfter(e){return this.enterChild(1,e,2)}childBefore(e){return this.enterChild(-1,e,-2)}enter(e,t,r=this.mode){return this.buffer?!(r&Ve.ExcludeBuffers)&&this.enterChild(1,e,t):this.yield(this._tree.enter(e,t,r))}parent(){if(!this.buffer)return this.yieldNode(this.mode&Ve.IncludeAnonymous?this._tree._parent:this._tree.parent);if(this.stack.length)return this.yieldBuf(this.stack.pop());let e=this.mode&Ve.IncludeAnonymous?this.buffer.parent:this.buffer.parent.nextSignificantParent();return this.buffer=null,this.yieldNode(e)}sibling(e){if(!this.buffer)return!!this._tree._parent&&this.yield(this._tree.index<0?null:this._tree._parent.nextChild(this._tree.index+e,e,0,4,this.mode));let{buffer:t}=this.buffer,r=this.stack.length-1;if(e<0){let e=r<0?0:this.stack[r]+4;if(this.index!=e)return this.yieldBuf(t.findChild(e,this.index,-1,0,4))}else{let e=t.buffer[this.index+3];if(e<(r<0?t.buffer.length:t.buffer[this.stack[r]+3]))return this.yieldBuf(e)}return r<0&&this.yield(this.buffer.parent.nextChild(this.buffer.index+e,e,0,4,this.mode))}nextSibling(){return this.sibling(1)}prevSibling(){return this.sibling(-1)}atLastNode(e){let t,r,{buffer:i}=this;if(i){if(e>0){if(this.index<i.buffer.buffer.length)return!1}else for(let e=0;e<this.index;e++)if(i.buffer.buffer[e+3]<this.index)return!1;({index:t,parent:r}=i)}else({index:t,_parent:r}=this._tree);for(;r;({index:t,_parent:r}=r))if(t>-1)for(let i=t+e,n=e<0?-1:r._tree.children.length;i!=n;i+=e){let e=r._tree.children[i];if(this.mode&Ve.IncludeAnonymous||e instanceof qe||!e.type.isAnonymous||Ze(e))return!1}return!0}move(e,t){if(t&&this.enterChild(e,0,4))return!0;for(;;){if(this.sibling(e))return!0;if(this.atLastNode(e)||!this.parent())return!1}}next(e=!0){return this.move(1,e)}prev(e=!0){return this.move(-1,e)}moveTo(e,t=0){for(;(this.from==this.to||(t<1?this.from>=e:this.from>e)||(t>-1?this.to<=e:this.to<e))&&this.parent(););for(;this.enterChild(1,e,t););return this}get node(){if(!this.buffer)return this._tree;let e=this.bufferNode,t=null,r=0;if(e&&e.context==this.buffer)e:for(let i=this.index,n=this.stack.length;n>=0;){for(let s=e;s;s=s._parent)if(s.index==i){if(i==this.index)return s;t=s,r=n+1;break e}i=this.stack[--n]}for(let e=r;e<this.stack.length;e++)t=new We(this.buffer,t,this.stack[e]);return this.bufferNode=new We(this.buffer,t,this.index)}get tree(){return this.buffer?null:this._tree._tree}iterate(e,t){for(let r=0;;){let i=!1;if(this.type.isAnonymous||!1!==e(this)){if(this.firstChild()){r++;continue}this.type.isAnonymous||(i=!0)}for(;i&&t&&t(this),i=this.type.isAnonymous,!this.nextSibling();){if(!r)return;this.parent(),r--,i=!0}}}matchContext(e){if(!this.buffer)return Ue(this.node,e);let{buffer:t}=this.buffer,{types:r}=t.set;for(let i=e.length-1,n=this.stack.length-1;i>=0;n--){if(n<0)return Ue(this.node,e,i);let s=r[t.buffer[this.stack[n]]];if(!s.isAnonymous){if(e[i]&&e[i]!=s.name)return!1;i--}}return!0}}function Ze(e){return e.children.some((e=>e instanceof qe||!e.type.isAnonymous||Ze(e)))}const He=new WeakMap;function Je(e,t){if(!e.isAnonymous||t instanceof qe||t.type!=e)return 1;let r=He.get(t);if(null==r){r=1;for(let i of t.children){if(i.type!=e||!(i instanceof Ae)){r=1;break}r+=Je(e,i)}He.set(t,r)}return r}function Ke(e,t,r,i,n,s,a,o,l){let u=0;for(let r=i;r<n;r++)u+=Je(e,t[r]);let h=Math.ceil(1.5*u/8),c=[],d=[];return function t(r,i,n,a,o){for(let u=n;u<a;){let n=u,p=i[u],f=Je(e,r[u]);for(u++;u<a;u++){let t=Je(e,r[u]);if(f+t>=h)break;f+=t}if(u==n+1){if(f>h){let e=r[n];t(e.children,e.positions,0,e.children.length,i[n]+o);continue}c.push(r[n])}else{let t=i[u-1]+r[u-1].length-p;c.push(Ke(e,r,i,n,u,p,t,null,l))}d.push(p+o-s)}}(t,r,i,n,0),(o||l)(c,d,a)}class et{startParse(e,t,r){return"string"==typeof e&&(e=new tt(e)),r=r?r.length?r.map((e=>new Se(e.from,e.to))):[new Se(0,0)]:[new Se(0,e.length)],this.createParse(e,t||[],r)}parse(e,t,r){let i=this.startParse(e,t,r);for(;;){let e=i.advance();if(e)return e}}}class tt{constructor(e){this.string=e}get length(){return this.string.length}chunk(e){return this.string.slice(e)}get lineChunks(){return!1}read(e,t){return this.string.slice(e,t)}}new Te({perNode:!0});class rt{constructor(e,t,r,i,n,s,a,o,l,u=0,h){this.p=e,this.stack=t,this.state=r,this.reducePos=i,this.pos=n,this.score=s,this.buffer=a,this.bufferBase=o,this.curContext=l,this.lookAhead=u,this.parent=h}toString(){return`[${this.stack.filter(((e,t)=>t%3==0)).concat(this.state)}]@${this.pos}${this.score?"!"+this.score:""}`}static start(e,t,r=0){let i=e.parser.context;return new rt(e,[],t,r,r,0,[],0,i?new it(i,i.start):null,0,null)}get context(){return this.curContext?this.curContext.context:null}pushState(e,t){this.stack.push(this.state,t,this.bufferBase+this.buffer.length),this.state=e}reduce(e){var t;let r=e>>19,i=65535&e,{parser:n}=this.p,s=n.dynamicPrecedence(i);if(s&&(this.score+=s),0==r)return this.pushState(n.getGoto(this.state,i,!0),this.reducePos),i<n.minRepeatTerm&&this.storeNode(i,this.reducePos,this.reducePos,4,!0),void this.reduceContext(i,this.reducePos);let a=this.stack.length-3*(r-1)-(262144&e?6:0),o=a?this.stack[a-2]:this.p.ranges[0].from,l=this.reducePos-o;l>=2e3&&!(null===(t=this.p.parser.nodeSet.types[i])||void 0===t?void 0:t.isAnonymous)&&(o==this.p.lastBigReductionStart?(this.p.bigReductionCount++,this.p.lastBigReductionSize=l):this.p.lastBigReductionSize<l&&(this.p.bigReductionCount=1,this.p.lastBigReductionStart=o,this.p.lastBigReductionSize=l));let u=a?this.stack[a-1]:0,h=this.bufferBase+this.buffer.length-u;if(i<n.minRepeatTerm||131072&e){let e=n.stateFlag(this.state,1)?this.pos:this.reducePos;this.storeNode(i,o,e,h+4,!0)}if(262144&e)this.state=this.stack[a];else{let e=this.stack[a-3];this.state=n.getGoto(e,i,!0)}for(;this.stack.length>a;)this.stack.pop();this.reduceContext(i,o)}storeNode(e,t,r,i=4,n=!1){if(0==e&&(!this.stack.length||this.stack[this.stack.length-1]<this.buffer.length+this.bufferBase)){let e=this,i=this.buffer.length;if(0==i&&e.parent&&(i=e.bufferBase-e.parent.bufferBase,e=e.parent),i>0&&0==e.buffer[i-4]&&e.buffer[i-1]>-1){if(t==r)return;if(e.buffer[i-2]>=t)return void(e.buffer[i-2]=r)}}if(n&&this.pos!=r){let n=this.buffer.length;if(n>0&&0!=this.buffer[n-4])for(;n>0&&this.buffer[n-2]>r;)this.buffer[n]=this.buffer[n-4],this.buffer[n+1]=this.buffer[n-3],this.buffer[n+2]=this.buffer[n-2],this.buffer[n+3]=this.buffer[n-1],n-=4,i>4&&(i-=4);this.buffer[n]=e,this.buffer[n+1]=t,this.buffer[n+2]=r,this.buffer[n+3]=i}else this.buffer.push(e,t,r,i)}shift(e,t,r,i){if(131072&e)this.pushState(65535&e,this.pos);else if(0==(262144&e)){let n=e,{parser:s}=this.p;(i>this.pos||t<=s.maxNode)&&(this.pos=i,s.stateFlag(n,1)||(this.reducePos=i)),this.pushState(n,r),this.shiftContext(t,r),t<=s.maxNode&&this.buffer.push(t,r,i,4)}else this.pos=i,this.shiftContext(t,r),t<=this.p.parser.maxNode&&this.buffer.push(t,r,i,4)}apply(e,t,r,i){65536&e?this.reduce(e):this.shift(e,t,r,i)}useNode(e,t){let r=this.p.reused.length-1;(r<0||this.p.reused[r]!=e)&&(this.p.reused.push(e),r++);let i=this.pos;this.reducePos=this.pos=i+e.length,this.pushState(t,i),this.buffer.push(r,i,this.reducePos,-1),this.curContext&&this.updateContext(this.curContext.tracker.reuse(this.curContext.context,e,this,this.p.stream.reset(this.pos-e.length)))}split(){let e=this,t=e.buffer.length;for(;t>0&&e.buffer[t-2]>e.reducePos;)t-=4;let r=e.buffer.slice(t),i=e.bufferBase+t;for(;e&&i==e.bufferBase;)e=e.parent;return new rt(this.p,this.stack.slice(),this.state,this.reducePos,this.pos,this.score,r,i,this.curContext,this.lookAhead,e)}recoverByDelete(e,t){let r=e<=this.p.parser.maxNode;r&&this.storeNode(e,this.pos,t,4),this.storeNode(0,this.pos,t,r?8:4),this.pos=this.reducePos=t,this.score-=190}canShift(e){for(let t=new nt(this);;){let r=this.p.parser.stateSlot(t.state,4)||this.p.parser.hasAction(t.state,e);if(0==r)return!1;if(0==(65536&r))return!0;t.reduce(r)}}recoverByInsert(e){if(this.stack.length>=300)return[];let t=this.p.parser.nextStates(this.state);if(t.length>8||this.stack.length>=120){let r=[];for(let i,n=0;n<t.length;n+=2)(i=t[n+1])!=this.state&&this.p.parser.hasAction(i,e)&&r.push(t[n],i);if(this.stack.length<120)for(let e=0;r.length<8&&e<t.length;e+=2){let i=t[e+1];r.some(((e,t)=>1&t&&e==i))||r.push(t[e],i)}t=r}let r=[];for(let e=0;e<t.length&&r.length<4;e+=2){let i=t[e+1];if(i==this.state)continue;let n=this.split();n.pushState(i,this.pos),n.storeNode(0,n.pos,n.pos,4,!0),n.shiftContext(t[e],this.pos),n.reducePos=this.pos,n.score-=200,r.push(n)}return r}forceReduce(){let{parser:e}=this.p,t=e.stateSlot(this.state,5);if(0==(65536&t))return!1;if(!e.validAction(this.state,t)){let r=t>>19,i=65535&t,n=this.stack.length-3*r;if(n<0||e.getGoto(this.stack[n],i,!1)<0){let e=this.findForcedReduction();if(null==e)return!1;t=e}this.storeNode(0,this.pos,this.pos,4,!0),this.score-=100}return this.reducePos=this.pos,this.reduce(t),!0}findForcedReduction(){let{parser:e}=this.p,t=[],r=(i,n)=>{if(!t.includes(i))return t.push(i),e.allActions(i,(t=>{if(393216&t);else if(65536&t){let r=(t>>19)-n;if(r>1){let i=65535&t,n=this.stack.length-3*r;if(n>=0&&e.getGoto(this.stack[n],i,!1)>=0)return r<<19|65536|i}}else{let e=r(t,n+1);if(null!=e)return e}}))};return r(this.state,0)}forceAll(){for(;!this.p.parser.stateFlag(this.state,2);)if(!this.forceReduce()){this.storeNode(0,this.pos,this.pos,4,!0);break}return this}get deadEnd(){if(3!=this.stack.length)return!1;let{parser:e}=this.p;return 65535==e.data[e.stateSlot(this.state,1)]&&!e.stateSlot(this.state,4)}restart(){this.storeNode(0,this.pos,this.pos,4,!0),this.state=this.stack[0],this.stack.length=0}sameState(e){if(this.state!=e.state||this.stack.length!=e.stack.length)return!1;for(let t=0;t<this.stack.length;t+=3)if(this.stack[t]!=e.stack[t])return!1;return!0}get parser(){return this.p.parser}dialectEnabled(e){return this.p.parser.dialect.flags[e]}shiftContext(e,t){this.curContext&&this.updateContext(this.curContext.tracker.shift(this.curContext.context,e,this,this.p.stream.reset(t)))}reduceContext(e,t){this.curContext&&this.updateContext(this.curContext.tracker.reduce(this.curContext.context,e,this,this.p.stream.reset(t)))}emitContext(){let e=this.buffer.length-1;(e<0||-3!=this.buffer[e])&&this.buffer.push(this.curContext.hash,this.pos,this.pos,-3)}emitLookAhead(){let e=this.buffer.length-1;(e<0||-4!=this.buffer[e])&&this.buffer.push(this.lookAhead,this.pos,this.pos,-4)}updateContext(e){if(e!=this.curContext.context){let t=new it(this.curContext.tracker,e);t.hash!=this.curContext.hash&&this.emitContext(),this.curContext=t}}setLookAhead(e){e>this.lookAhead&&(this.emitLookAhead(),this.lookAhead=e)}close(){this.curContext&&this.curContext.tracker.strict&&this.emitContext(),this.lookAhead>0&&this.emitLookAhead()}}class it{constructor(e,t){this.tracker=e,this.context=t,this.hash=e.strict?e.hash(t):0}}class nt{constructor(e){this.start=e,this.state=e.state,this.stack=e.stack,this.base=this.stack.length}reduce(e){let t=65535&e,r=e>>19;0==r?(this.stack==this.start.stack&&(this.stack=this.stack.slice()),this.stack.push(this.state,0,0),this.base+=3):this.base-=3*(r-1);let i=this.start.p.parser.getGoto(this.stack[this.base-3],t,!0);this.state=i}}class st{constructor(e,t,r){this.stack=e,this.pos=t,this.index=r,this.buffer=e.buffer,0==this.index&&this.maybeNext()}static create(e,t=e.bufferBase+e.buffer.length){return new st(e,t,t-e.bufferBase)}maybeNext(){let e=this.stack.parent;null!=e&&(this.index=this.stack.bufferBase-e.bufferBase,this.stack=e,this.buffer=e.buffer)}get id(){return this.buffer[this.index-4]}get start(){return this.buffer[this.index-3]}get end(){return this.buffer[this.index-2]}get size(){return this.buffer[this.index-1]}next(){this.index-=4,this.pos-=4,0==this.index&&this.maybeNext()}fork(){return new st(this.stack,this.pos,this.index)}}function at(e,t=Uint16Array){if("string"!=typeof e)return e;let r=null;for(let i=0,n=0;i<e.length;){let s=0;for(;;){let t=e.charCodeAt(i++),r=!1;if(126==t){s=65535;break}t>=92&&t--,t>=34&&t--;let n=t-32;if(n>=46&&(n-=46,r=!0),s+=n,r)break;s*=46}r?r[n++]=s:r=new t(s)}return r}class ot{constructor(){this.start=-1,this.value=-1,this.end=-1,this.extended=-1,this.lookAhead=0,this.mask=0,this.context=0}}const lt=new ot;class ut{constructor(e,t){this.input=e,this.ranges=t,this.chunk="",this.chunkOff=0,this.chunk2="",this.chunk2Pos=0,this.next=-1,this.token=lt,this.rangeIndex=0,this.pos=this.chunkPos=t[0].from,this.range=t[0],this.end=t[t.length-1].to,this.readNext()}resolveOffset(e,t){let r=this.range,i=this.rangeIndex,n=this.pos+e;for(;n<r.from;){if(!i)return null;let e=this.ranges[--i];n-=r.from-e.to,r=e}for(;t<0?n>r.to:n>=r.to;){if(i==this.ranges.length-1)return null;let e=this.ranges[++i];n+=e.from-r.to,r=e}return n}clipPos(e){if(e>=this.range.from&&e<this.range.to)return e;for(let t of this.ranges)if(t.to>e)return Math.max(e,t.from);return this.end}peek(e){let t,r,i=this.chunkOff+e;if(i>=0&&i<this.chunk.length)t=this.pos+e,r=this.chunk.charCodeAt(i);else{let i=this.resolveOffset(e,1);if(null==i)return-1;if(t=i,t>=this.chunk2Pos&&t<this.chunk2Pos+this.chunk2.length)r=this.chunk2.charCodeAt(t-this.chunk2Pos);else{let e=this.rangeIndex,i=this.range;for(;i.to<=t;)i=this.ranges[++e];this.chunk2=this.input.chunk(this.chunk2Pos=t),t+this.chunk2.length>i.to&&(this.chunk2=this.chunk2.slice(0,i.to-t)),r=this.chunk2.charCodeAt(0)}}return t>=this.token.lookAhead&&(this.token.lookAhead=t+1),r}acceptToken(e,t=0){let r=t?this.resolveOffset(t,-1):this.pos;if(null==r||r<this.token.start)throw new RangeError("Token end out of bounds");this.token.value=e,this.token.end=r}acceptTokenTo(e,t){this.token.value=e,this.token.end=t}getChunk(){if(this.pos>=this.chunk2Pos&&this.pos<this.chunk2Pos+this.chunk2.length){let{chunk:e,chunkPos:t}=this;this.chunk=this.chunk2,this.chunkPos=this.chunk2Pos,this.chunk2=e,this.chunk2Pos=t,this.chunkOff=this.pos-this.chunkPos}else{this.chunk2=this.chunk,this.chunk2Pos=this.chunkPos;let e=this.input.chunk(this.pos),t=this.pos+e.length;this.chunk=t>this.range.to?e.slice(0,this.range.to-this.pos):e,this.chunkPos=this.pos,this.chunkOff=0}}readNext(){return this.chunkOff>=this.chunk.length&&(this.getChunk(),this.chunkOff==this.chunk.length)?this.next=-1:this.next=this.chunk.charCodeAt(this.chunkOff)}advance(e=1){for(this.chunkOff+=e;this.pos+e>=this.range.to;){if(this.rangeIndex==this.ranges.length-1)return this.setDone();e-=this.range.to-this.pos,this.range=this.ranges[++this.rangeIndex],this.pos=this.range.from}return this.pos+=e,this.pos>=this.token.lookAhead&&(this.token.lookAhead=this.pos+1),this.readNext()}setDone(){return this.pos=this.chunkPos=this.end,this.range=this.ranges[this.rangeIndex=this.ranges.length-1],this.chunk="",this.next=-1}reset(e,t){if(t?(this.token=t,t.start=e,t.lookAhead=e+1,t.value=t.extended=-1):this.token=lt,this.pos!=e){if(this.pos=e,e==this.end)return this.setDone(),this;for(;e<this.range.from;)this.range=this.ranges[--this.rangeIndex];for(;e>=this.range.to;)this.range=this.ranges[++this.rangeIndex];e>=this.chunkPos&&e<this.chunkPos+this.chunk.length?this.chunkOff=e-this.chunkPos:(this.chunk="",this.chunkOff=0),this.readNext()}return this}read(e,t){if(e>=this.chunkPos&&t<=this.chunkPos+this.chunk.length)return this.chunk.slice(e-this.chunkPos,t-this.chunkPos);if(e>=this.chunk2Pos&&t<=this.chunk2Pos+this.chunk2.length)return this.chunk2.slice(e-this.chunk2Pos,t-this.chunk2Pos);if(e>=this.range.from&&t<=this.range.to)return this.input.read(e,t);let r="";for(let i of this.ranges){if(i.from>=t)break;i.to>e&&(r+=this.input.read(Math.max(i.from,e),Math.min(i.to,t)))}return r}}class ht{constructor(e,t){this.data=e,this.id=t}token(e,t){let{parser:r}=t.p;!function(e,t,r,i,n,s){let a=0,o=1<<i,{dialect:l}=r.p.parser;e:for(;0!=(o&e[a]);){let r=e[a+1];for(let i=a+3;i<r;i+=2)if((e[i+1]&o)>0){let r=e[i];if(l.allows(r)&&(-1==t.token.value||t.token.value==r||dt(r,t.token.value,n,s))){t.acceptToken(r);break}}let i=t.next,u=0,h=e[a+2];if(!(t.next<0&&h>u&&65535==e[r+3*h-3])){for(;u<h;){let n=u+h>>1,s=r+n+(n<<1),o=e[s],l=e[s+1]||65536;if(i<o)h=n;else{if(!(i>=l)){a=e[s+2],t.advance();continue e}u=n+1}}break}a=e[r+3*h-1]}}(this.data,e,t,this.id,r.data,r.tokenPrecTable)}}function ct(e,t,r){for(let i,n=t;65535!=(i=e[n]);n++)if(i==r)return n-t;return-1}function dt(e,t,r,i){let n=ct(r,i,t);return n<0||ct(r,i,e)<n}ht.prototype.contextual=ht.prototype.fallback=ht.prototype.extend=!1,ht.prototype.fallback=ht.prototype.extend=!1;const pt="undefined"!=typeof process&&process.env&&/\bparse\b/.test(process.env.LOG);let ft=null;function Ot(e,t,r){let i=e.cursor(Ve.IncludeAnonymous);for(i.moveTo(t);;)if(!(r<0?i.childBefore(t):i.childAfter(t)))for(;;){if((r<0?i.to<t:i.from>t)&&!i.type.isError)return r<0?Math.max(0,Math.min(i.to-1,t-25)):Math.min(e.length,Math.max(i.from+1,t+25));if(r<0?i.prevSibling():i.nextSibling())break;if(!i.parent())return r<0?0:e.length}}class gt{constructor(e,t){this.fragments=e,this.nodeSet=t,this.i=0,this.fragment=null,this.safeFrom=-1,this.safeTo=-1,this.trees=[],this.start=[],this.index=[],this.nextFragment()}nextFragment(){let e=this.fragment=this.i==this.fragments.length?null:this.fragments[this.i++];if(e){for(this.safeFrom=e.openStart?Ot(e.tree,e.from+e.offset,1)-e.offset:e.from,this.safeTo=e.openEnd?Ot(e.tree,e.to+e.offset,-1)-e.offset:e.to;this.trees.length;)this.trees.pop(),this.start.pop(),this.index.pop();this.trees.push(e.tree),this.start.push(-e.offset),this.index.push(0),this.nextStart=this.safeFrom}else this.nextStart=1e9}nodeAt(e){if(e<this.nextStart)return null;for(;this.fragment&&this.safeTo<=e;)this.nextFragment();if(!this.fragment)return null;for(;;){let t=this.trees.length-1;if(t<0)return this.nextFragment(),null;let r=this.trees[t],i=this.index[t];if(i==r.children.length){this.trees.pop(),this.start.pop(),this.index.pop();continue}let n=r.children[i],s=this.start[t]+r.positions[i];if(s>e)return this.nextStart=s,null;if(n instanceof Ae){if(s==e){if(s<this.safeFrom)return null;let e=s+n.length;if(e<=this.safeTo){let t=n.prop(Te.lookAhead);if(!t||e+t<this.fragment.to)return n}}this.index[t]++,s+n.length>=Math.max(this.safeFrom,e)&&(this.trees.push(n),this.start.push(s),this.index.push(0))}else this.index[t]++,this.nextStart=s+n.length}}}class bt{constructor(e,t){this.stream=t,this.tokens=[],this.mainToken=null,this.actions=[],this.tokens=e.tokenizers.map((e=>new ot))}getActions(e){let t=0,r=null,{parser:i}=e.p,{tokenizers:n}=i,s=i.stateSlot(e.state,3),a=e.curContext?e.curContext.hash:0,o=0;for(let i=0;i<n.length;i++){if(0==(1<<i&s))continue;let l=n[i],u=this.tokens[i];if((!r||l.fallback)&&((l.contextual||u.start!=e.pos||u.mask!=s||u.context!=a)&&(this.updateCachedToken(u,l,e),u.mask=s,u.context=a),u.lookAhead>u.end+25&&(o=Math.max(u.lookAhead,o)),0!=u.value)){let i=t;if(u.extended>-1&&(t=this.addActions(e,u.extended,u.end,t)),t=this.addActions(e,u.value,u.end,t),!l.extend&&(r=u,t>i))break}}for(;this.actions.length>t;)this.actions.pop();return o&&e.setLookAhead(o),r||e.pos!=this.stream.end||(r=new ot,r.value=e.p.parser.eofTerm,r.start=r.end=e.pos,t=this.addActions(e,r.value,r.end,t)),this.mainToken=r,this.actions}getMainToken(e){if(this.mainToken)return this.mainToken;let t=new ot,{pos:r,p:i}=e;return t.start=r,t.end=Math.min(r+1,i.stream.end),t.value=r==i.stream.end?i.parser.eofTerm:0,t}updateCachedToken(e,t,r){let i=this.stream.clipPos(r.pos);if(t.token(this.stream.reset(i,e),r),e.value>-1){let{parser:t}=r.p;for(let i=0;i<t.specialized.length;i++)if(t.specialized[i]==e.value){let n=t.specializers[i](this.stream.read(e.start,e.end),r);if(n>=0&&r.p.parser.dialect.allows(n>>1)){0==(1&n)?e.value=n>>1:e.extended=n>>1;break}}}else e.value=0,e.end=this.stream.clipPos(i+1)}putAction(e,t,r,i){for(let t=0;t<i;t+=3)if(this.actions[t]==e)return i;return this.actions[i++]=e,this.actions[i++]=t,this.actions[i++]=r,i}addActions(e,t,r,i){let{state:n}=e,{parser:s}=e.p,{data:a}=s;for(let e=0;e<2;e++)for(let o=s.stateSlot(n,e?2:1);;o+=3){if(65535==a[o]){if(1!=a[o+1]){0==i&&2==a[o+1]&&(i=this.putAction(xt(a,o+2),t,r,i));break}o=xt(a,o+2)}a[o]==t&&(i=this.putAction(xt(a,o+1),t,r,i))}return i}}class mt{constructor(e,t,r,i){this.parser=e,this.input=t,this.ranges=i,this.recovering=0,this.nextStackID=9812,this.minStackPos=0,this.reused=[],this.stoppedAt=null,this.lastBigReductionStart=-1,this.lastBigReductionSize=0,this.bigReductionCount=0,this.stream=new ut(t,i),this.tokens=new bt(e,this.stream),this.topTerm=e.top[1];let{from:n}=i[0];this.stacks=[rt.start(this,e.top[0],n)],this.fragments=r.length&&this.stream.end-n>4*e.bufferLength?new gt(r,e.nodeSet):null}get parsedPos(){return this.minStackPos}advance(){let e,t,r=this.stacks,i=this.minStackPos,n=this.stacks=[];if(this.bigReductionCount>300&&1==r.length){let[e]=r;for(;e.forceReduce()&&e.stack.length&&e.stack[e.stack.length-2]>=this.lastBigReductionStart;);this.bigReductionCount=this.lastBigReductionSize=0}for(let s=0;s<r.length;s++){let a=r[s];for(;;){if(this.tokens.mainToken=null,a.pos>i)n.push(a);else{if(this.advanceStack(a,n,r))continue;{e||(e=[],t=[]),e.push(a);let r=this.tokens.getMainToken(a);t.push(r.value,r.end)}}break}}if(!n.length){let t=e&&function(e){let t=null;for(let r of e){let e=r.p.stoppedAt;(r.pos==r.p.stream.end||null!=e&&r.pos>e)&&r.p.parser.stateFlag(r.state,2)&&(!t||t.score<r.score)&&(t=r)}return t}(e);if(t)return pt&&console.log("Finish with "+this.stackID(t)),this.stackToTree(t);if(this.parser.strict)throw pt&&e&&console.log("Stuck with token "+(this.tokens.mainToken?this.parser.getName(this.tokens.mainToken.value):"none")),new SyntaxError("No parse at "+i);this.recovering||(this.recovering=5)}if(this.recovering&&e){let r=null!=this.stoppedAt&&e[0].pos>this.stoppedAt?e[0]:this.runRecovery(e,t,n);if(r)return pt&&console.log("Force-finish "+this.stackID(r)),this.stackToTree(r.forceAll())}if(this.recovering){let e=1==this.recovering?1:3*this.recovering;if(n.length>e)for(n.sort(((e,t)=>t.score-e.score));n.length>e;)n.pop();n.some((e=>e.reducePos>i))&&this.recovering--}else if(n.length>1){e:for(let e=0;e<n.length-1;e++){let t=n[e];for(let r=e+1;r<n.length;r++){let i=n[r];if(t.sameState(i)||t.buffer.length>500&&i.buffer.length>500){if(!((t.score-i.score||t.buffer.length-i.buffer.length)>0)){n.splice(e--,1);continue e}n.splice(r--,1)}}}n.length>12&&n.splice(12,n.length-12)}this.minStackPos=n[0].pos;for(let e=1;e<n.length;e++)n[e].pos<this.minStackPos&&(this.minStackPos=n[e].pos);return null}stopAt(e){if(null!=this.stoppedAt&&this.stoppedAt<e)throw new RangeError("Can't move stoppedAt forward");this.stoppedAt=e}advanceStack(e,t,r){let i=e.pos,{parser:n}=this,s=pt?this.stackID(e)+" -> ":"";if(null!=this.stoppedAt&&i>this.stoppedAt)return e.forceReduce()?e:null;if(this.fragments){let t=e.curContext&&e.curContext.tracker.strict,r=t?e.curContext.hash:0;for(let a=this.fragments.nodeAt(i);a;){let i=this.parser.nodeSet.types[a.type.id]==a.type?n.getGoto(e.state,a.type.id):-1;if(i>-1&&a.length&&(!t||(a.prop(Te.contextHash)||0)==r))return e.useNode(a,i),pt&&console.log(s+this.stackID(e)+` (via reuse of ${n.getName(a.type.id)})`),!0;if(!(a instanceof Ae)||0==a.children.length||a.positions[0]>0)break;let o=a.children[0];if(!(o instanceof Ae&&0==a.positions[0]))break;a=o}}let a=n.stateSlot(e.state,4);if(a>0)return e.reduce(a),pt&&console.log(s+this.stackID(e)+` (via always-reduce ${n.getName(65535&a)})`),!0;if(e.stack.length>=8400)for(;e.stack.length>6e3&&e.forceReduce(););let o=this.tokens.getActions(e);for(let a=0;a<o.length;){let l=o[a++],u=o[a++],h=o[a++],c=a==o.length||!r,d=c?e:e.split(),p=this.tokens.mainToken;if(d.apply(l,u,p?p.start:d.pos,h),pt&&console.log(s+this.stackID(d)+` (via ${0==(65536&l)?"shift":`reduce of ${n.getName(65535&l)}`} for ${n.getName(u)} @ ${i}${d==e?"":", split"})`),c)return!0;d.pos>i?t.push(d):r.push(d)}return!1}advanceFully(e,t){let r=e.pos;for(;;){if(!this.advanceStack(e,null,null))return!1;if(e.pos>r)return yt(e,t),!0}}runRecovery(e,t,r){let i=null,n=!1;for(let s=0;s<e.length;s++){let a=e[s],o=t[s<<1],l=t[1+(s<<1)],u=pt?this.stackID(a)+" -> ":"";if(a.deadEnd){if(n)continue;if(n=!0,a.restart(),pt&&console.log(u+this.stackID(a)+" (restarted)"),this.advanceFully(a,r))continue}let h=a.split(),c=u;for(let e=0;h.forceReduce()&&e<10&&(pt&&console.log(c+this.stackID(h)+" (via force-reduce)"),!this.advanceFully(h,r));e++)pt&&(c=this.stackID(h)+" -> ");for(let e of a.recoverByInsert(o))pt&&console.log(u+this.stackID(e)+" (via recover-insert)"),this.advanceFully(e,r);this.stream.end>a.pos?(l==a.pos&&(l++,o=0),a.recoverByDelete(o,l),pt&&console.log(u+this.stackID(a)+` (via recover-delete ${this.parser.getName(o)})`),yt(a,r)):(!i||i.score<a.score)&&(i=a)}return i}stackToTree(e){return e.close(),Ae.build({buffer:st.create(e),nodeSet:this.parser.nodeSet,topID:this.topTerm,maxBufferLength:this.parser.bufferLength,reused:this.reused,start:this.ranges[0].from,length:e.pos-this.ranges[0].from,minRepeatType:this.parser.minRepeatTerm})}stackID(e){let t=(ft||(ft=new WeakMap)).get(e);return t||ft.set(e,t=String.fromCodePoint(this.nextStackID++)),t+e}}function yt(e,t){for(let r=0;r<t.length;r++){let i=t[r];if(i.pos==e.pos&&i.sameState(e))return void(t[r].score<e.score&&(t[r]=e))}t.push(e)}class Pt{constructor(e,t,r){this.source=e,this.flags=t,this.disabled=r}allows(e){return!this.disabled||0==this.disabled[e]}}class vt extends et{constructor(e){if(super(),this.wrappers=[],14!=e.version)throw new RangeError(`Parser version (${e.version}) doesn't match runtime version (14)`);let t=e.nodeNames.split(" ");this.minRepeatTerm=t.length;for(let r=0;r<e.repeatNodeCount;r++)t.push("");let r=Object.keys(e.topRules).map((t=>e.topRules[t][1])),i=[];for(let e=0;e<t.length;e++)i.push([]);function n(e,t,r){i[e].push([t,t.deserialize(String(r))])}if(e.nodeProps)for(let t of e.nodeProps){let e=t[0];"string"==typeof e&&(e=Te[e]);for(let r=1;r<t.length;){let i=t[r++];if(i>=0)n(i,e,t[r++]);else{let s=t[r+-i];for(let a=-i;a>0;a--)n(t[r++],e,s);r++}}}this.nodeSet=new Ee(t.map(((t,n)=>_e.define({name:n>=this.minRepeatTerm?void 0:t,id:n,props:i[n],top:r.indexOf(n)>-1,error:0==n,skipped:e.skippedNodes&&e.skippedNodes.indexOf(n)>-1})))),e.propSources&&(this.nodeSet=this.nodeSet.extend(...e.propSources)),this.strict=!1,this.bufferLength=we;let s=at(e.tokenData);this.context=e.context,this.specializerSpecs=e.specialized||[],this.specialized=new Uint16Array(this.specializerSpecs.length);for(let e=0;e<this.specializerSpecs.length;e++)this.specialized[e]=this.specializerSpecs[e].term;this.specializers=this.specializerSpecs.map(Qt),this.states=at(e.states,Uint32Array),this.data=at(e.stateData),this.goto=at(e.goto),this.maxTerm=e.maxTerm,this.tokenizers=e.tokenizers.map((e=>"number"==typeof e?new ht(s,e):e)),this.topRules=e.topRules,this.dialects=e.dialects||{},this.dynamicPrecedences=e.dynamicPrecedences||null,this.tokenPrecTable=e.tokenPrec,this.termNames=e.termNames||null,this.maxNode=this.nodeSet.types.length-1,this.dialect=this.parseDialect(),this.top=this.topRules[Object.keys(this.topRules)[0]]}createParse(e,t,r){let i=new mt(this,e,t,r);for(let n of this.wrappers)i=n(i,e,t,r);return i}getGoto(e,t,r=!1){let i=this.goto;if(t>=i[0])return-1;for(let n=i[t+1];;){let t=i[n++],s=1&t,a=i[n++];if(s&&r)return a;for(let r=n+(t>>1);n<r;n++)if(i[n]==e)return a;if(s)return-1}}hasAction(e,t){let r=this.data;for(let i=0;i<2;i++)for(let n,s=this.stateSlot(e,i?2:1);;s+=3){if(65535==(n=r[s])){if(1!=r[s+1]){if(2==r[s+1])return xt(r,s+2);break}n=r[s=xt(r,s+2)]}if(n==t||0==n)return xt(r,s+1)}return 0}stateSlot(e,t){return this.states[6*e+t]}stateFlag(e,t){return(this.stateSlot(e,0)&t)>0}validAction(e,t){return!!this.allActions(e,(e=>e==t||null))}allActions(e,t){let r=this.stateSlot(e,4),i=r?t(r):void 0;for(let r=this.stateSlot(e,1);null==i;r+=3){if(65535==this.data[r]){if(1!=this.data[r+1])break;r=xt(this.data,r+2)}i=t(xt(this.data,r+1))}return i}nextStates(e){let t=[];for(let r=this.stateSlot(e,1);;r+=3){if(65535==this.data[r]){if(1!=this.data[r+1])break;r=xt(this.data,r+2)}if(0==(1&this.data[r+2])){let e=this.data[r+1];t.some(((t,r)=>1&r&&t==e))||t.push(this.data[r],e)}}return t}configure(e){let t=Object.assign(Object.create(vt.prototype),this);if(e.props&&(t.nodeSet=this.nodeSet.extend(...e.props)),e.top){let r=this.topRules[e.top];if(!r)throw new RangeError(`Invalid top rule name ${e.top}`);t.top=r}return e.tokenizers&&(t.tokenizers=this.tokenizers.map((t=>{let r=e.tokenizers.find((e=>e.from==t));return r?r.to:t}))),e.specializers&&(t.specializers=this.specializers.slice(),t.specializerSpecs=this.specializerSpecs.map(((r,i)=>{let n=e.specializers.find((e=>e.from==r.external));if(!n)return r;let s=Object.assign(Object.assign({},r),{external:n.to});return t.specializers[i]=Qt(s),s}))),e.contextTracker&&(t.context=e.contextTracker),e.dialect&&(t.dialect=this.parseDialect(e.dialect)),null!=e.strict&&(t.strict=e.strict),e.wrap&&(t.wrappers=t.wrappers.concat(e.wrap)),null!=e.bufferLength&&(t.bufferLength=e.bufferLength),t}hasWrappers(){return this.wrappers.length>0}getName(e){return this.termNames?this.termNames[e]:String(e<=this.maxNode&&this.nodeSet.types[e].name||e)}get eofTerm(){return this.maxNode+1}get topNode(){return this.nodeSet.types[this.top[1]]}dynamicPrecedence(e){let t=this.dynamicPrecedences;return null==t?0:t[e]||0}parseDialect(e){let t=Object.keys(this.dialects),r=t.map((()=>!1));if(e)for(let i of e.split(" ")){let e=t.indexOf(i);e>=0&&(r[e]=!0)}let i=null;for(let e=0;e<t.length;e++)if(!r[e])for(let r,n=this.dialects[t[e]];65535!=(r=this.data[n++]);)(i||(i=new Uint8Array(this.maxTerm+1)))[r]=1;return new Pt(e,r,i)}static deserialize(e){return new vt(e)}}function xt(e,t){return e[t]|e[t+1]<<16}function Qt(e){if(e.external){let t=e.extend?1:0;return(r,i)=>e.external(r,i)<<1|t}return e.get}const $t={json:1,logfmt:2,unpack:3,pattern:4,regexp:5,ip:7,label_format:8,line_format:9,label_replace:10,vector:11,offset:12,bool:13,on:14,ignoring:15,group_left:16,group_right:17,unwrap:6,decolorize:18,drop:19,keep:20},wt={by:21,without:22,and:23,or:24,unless:25,sum:26,avg:27,count:28,max:29,min:30,stddev:31,stdvar:32,bottomk:33,topk:34,sort:35,sort_desc:36},kt={__proto__:null,count_over_time:295,rate:297,rate_counter:299,bytes_over_time:301,bytes_rate:303,avg_over_time:305,sum_over_time:307,min_over_time:309,max_over_time:311,stddev_over_time:313,stdvar_over_time:315,quantile_over_time:317,first_over_time:319,last_over_time:321,absent_over_time:323,bytes:329,duration:331,duration_seconds:333},St=vt.deserialize({version:14,states:"EnOYQPOOO#cQPO'#DVO$rQPO'#DUOYQPO'#DUOOQO'#E_'#E_O%PQPO'#E^OOQO'#Ez'#EzO%UQPO'#EyQ%aQPOOOOQO'#FY'#FYO&bQPO'#FYO&gQPO'#FZO&lQPO'#F[OOQO'#E]'#E]OOQO'#DT'#DTOOQO'#E`'#E`OOQO'#Ea'#EaOOQO'#Eb'#EbOOQO'#Ec'#EcOOQO'#Ed'#EdOOQO'#Ee'#EeOOQO'#Ef'#EfOOQO'#Eg'#EgOOQO'#Eh'#EhOOQO'#Ei'#EiOOQO'#Ej'#EjOOQO'#Ek'#EkOOQO'#El'#ElOOQO'#Em'#EmOOQO'#En'#EnO&qQPO'#DXOOQO'#DW'#DWO'PQPO,59qOOQO'#Dd'#DdO'XQPO'#DcO'aQPO'#DbO(zQPO'#DaO*eQPO'#DaOOQO'#D`'#D`O,gQPO,59pO-uQPO,59pO-|QPO,5:wO.TQPO,5:xO.`QPO'#EwO0kQPO,5;eO0rQPO,5;eO0wQPO,5;gO0wQPO,5;gO0wQPO,5;gO0wQPO,5;gO0wQPO,5;gO0wQPO,5;gOOQO,5;t,5;tOYQPO,5;uO3ZQPO,5;vO3`QPO,59sO#cQPO,59rOOQO1G/]1G/]OOQO'#Dg'#DgO3eQPO,59}O5OQPO,59}O5TQPO,59|OOQO,59|,59|O5]QPO'#DXO5zQPO'#DjO7kQPO'#DmO9XQPO'#DmOOQO'#Dm'#DmOOQO'#Dt'#DtOOQO'#Dr'#DrO+TQPO'#DrO9^QPO,59{O:wQPO'#EQO:|QPO'#EROOQO'#EU'#EUO;RQPO'#EVO;WQPO'#EYOOQO,59{,59{OOQO,59z,59zOOQO1G/[1G/[OOQO1G0c1G0cO;]QPO'#EoO.WQPO'#EoO;qQPO1G0dO;vQPO1G0dO;{QPO,5;cO<TQPO1G1PO=`QPO1G1PO=gQPO1G1PO=nQPO'#E}O?|QPO'#E|O@WQPO'#E|OYQPO1G1ROYQPO1G1ROYQPO1G1ROYQPO1G1ROYQPO1G1ROYQPO1G1RO@bQPO1G1aO@iQPO1G1bOOQO1G/_1G/_OOQO1G/^1G/^O5TQPO1G/iO@nQPO1G/iO@sQPO'#DhOB^QPO'#DhOOQO1G/h1G/hOBcQPO,59sOBiQPO,5:aOOQO'#Dk'#DkOBtQPO,5:UODeQPO'#DpOOQO'#Do'#DoOFRQPO,5:]OGlQPO,5:YOOQO,5:X,5:XOIVQPO,5:^O+TQPO,5:^O+TQPO,5:^OOQO,5:l,5:lOIeQPO'#ETOOQO'#ES'#ESOIjQPO,5:mOKTQPO'#EXOOQO'#EX'#EXOOQO'#EW'#EWOLtQPO,5:qON_QPO'#E[OOQO'#E['#E[OOQO'#EZ'#EZO!!OQPO,5:tO!#iQPO'#DaO;]QPO,5;ZO!#pQPO'#EpO!#uQPO,5;ZO!$`QPO,5;ZO!$jQPO,5;ZO!$qQPO,5;ZO!$vQPO7+&OO.WQPO7+&OOOQO'#Ex'#ExO!&WQPO1G0}OOQO1G0}1G0}O!&`QPO7+&kOYQPO7+&kO!'pQPO7+&kO!'wQPO7+&kO!(OQQO'#FOOOQO,5;i,5;iO!*^QPO,5;hO!*eQPO,5;hO!+vQPO7+&mO!+}QPO7+&mOOQO7+&m7+&mO!,[QPO7+&mO!,cQPO7+&mO!-hQPO7+&mO!-xQPO7+&{OOQO7+&|7+&|OOQO7+%T7+%TO!-}QPO7+%TO5TQPO,5:SO!.SQPO,5:SO!.XQPO1G/yOOQO1G/{1G/{OOQO1G0S1G0SOOQO1G0U1G0UOOQO,5:V,5:VO!.^QPO1G/wO!/wQPO,5:[O!/|QPO,5:ZOOQO1G/x1G/xO!0RQPO1G/xO!1lQPO,5:oO:|QPO,5:nO;RQPO,5:rO;WQPO,5:uO!1tQPO,5;^O!#uQPO1G0uO!2SQPO1G0uO!2[QPO,5;[O+TQPO,5;^O!2aQPO1G0uO!2hQPO'#EqO!2mQPO1G0uO!2aQPO1G0uO!2uQPO1G0uO!2|QPO1G0uO;lQPO1G0uOOQO1G0u1G0uOOQO<<Ij<<IjO!3XQPO<<IjO!3^QPO,5;dOOQO7+&i7+&iOOQO<<JV<<JVO!3cQPO<<JVOYQPO<<JVOOQO'#FQ'#FQO!3jQPO,5;jOOQO'#FP'#FPOOQO,5;j,5;jOOQO1G1S1G1SO!3rQPO1G1SO!5{QPO<<JgOOQO<<Ho<<HoOOQO1G/n1G/nO!6QQPO1G/nO!6VQPO7+%eOOQO1G/v1G/vOOQO1G/u1G/uOOQO1G0Z1G0ZOOQO1G0Y1G0YOOQO1G0^1G0^OOQO1G0a1G0aOOQO'#Es'#EsOOQO1G0x1G0xO!6[QPO1G0xOOQO'#Et'#EtOOQO'#Eu'#EuOOQO'#Ev'#EvOOQO7+&a7+&aOOQO1G0v1G0vO!6aQPO1G0xO!6uQPO7+&aOOQO,5;],5;]O!6}QPO7+&aO;lQPO7+&aO!7UQPO7+&aO!7aQPOAN?UOOQO1G1O1G1OO!8qQPOAN?qO!:RQPOAN?qO!:YQQO1G1UOOQO1G1U1G1UOOQO7+&n7+&nO!:bQPOAN@ROOQO7+%Y7+%YO!:gQPO<<IPO!:lQPO7+&dO!:qQPO<<I{O!:yQPO<<I{O!;RQPO'#ErO!;WQPO<<I{OOQOG24pG24pOOQOG25]G25]OOQO1G1V1G1VOOQO7+&p7+&pO!;`QPOG25mOOQOAN>kAN>kO!;eQPO<<JOOOQOAN?gAN?gO!;jQPOAN?gO!;rQPOLD+XOOQOAN?jAN?jOOQO,5:m,5:mO!;wQPO!$'NsO!;|QPO!)9D_O!<RQPO!.K9yOOQO!4//e!4//eO:|QPO'#ERO!<WQPO'#DaO!=OQPO,59pO!=YQPO'#DUOYQPO1G1ROYQPO1G1ROYQPO1G1ROYQPO1G1ROYQPO1G1ROYQPO1G1RO0wQPO,5;gO0wQPO,5;gO0wQPO,5;gO0wQPO,5;gO0wQPO,5;gO0wQPO,5;gO!>eQPO7+&mO!>lQPO7+&mO!>yQPO7+&mO!@RQPO7+&mO!@YQPO7+&mO!?QQPO'#E{",stateData:"!@g~O$ROSuOS~OYZOZ[OjUOkUOlUOmUOnUOoUOpUOqUOrUOsUOtUO!sXO#vYO#wYO$SPO$VRO$X_O$Y`O$ZaO$[bO$]cO$^dO$_eO$`fO$agO$bhO$ciO$djO$ekO$flO$gmO~O|nO~O!PqO!RqO!XqO!YqOgxXhxXixX!jxX!lxX!mxX!nxX!oxX#vxX#wxX#xxX#yxX#zxX#{xX~O!]uO$PxX$WxX~P#hO$VzO~Oe{Of{O$V|O~Og!POh!OOi!PO!P!TO!j!TO!l!TO!m!TO!n!TO!o!TO#v!QO#w!QO#x!RO#y!RO#z!RO#{!SO~O!s!UO~O$V!VO~O$V!WO~O}!XO!P!XO!Q!XO!R!XO~O$T!YO$U!ZO~OV![O!O!]O~Oh!_Og!UXi!UX!P!UX!R!UX!X!UX!Y!UX!]!UX!j!UX!l!UX!m!UX!n!UX!o!UX#v!UX#w!UX#x!UX#y!UX#z!UX#{!UX$P!UX$W!UX$h!UX$T!UX~O!PqO!RqO!XqO!YqOg!TXh!TXi!TX!]!TX!j!TX!l!TX!m!TX!n!TX!o!TX#v!TX#w!TX#x!TX#y!TX#z!TX#{!TX$P!TX$W!TX$h!TX$T!TX~OP!cOQ!bOR!eOS!dOT!dOW!kOX!jOb!lOc!mOd!nO|!aO$V!hO~O!PqO!RqO!XqO!YqOgxahxaixa!jxa!lxa!mxa!nxa!oxa#vxa#wxa#xxa#yxa#zxa#{xa~O!]uO$Pxa$Wxa~P+]OgwXhwXiwX!PwX!jwX!lwX!mwX!nwX!owX#vwX#wwX#xwX#ywX#zwX#{wX~O$W!qO~P,tO$W!rO~P,tO!s!vO$SPO$V!tO~O$V!wO~OYZOZ[OjUOkUOlUOmUOnUOoUOpUOqUOrUOsUOtUO#vYO#wYO$SPO$VRO$X_O$Y`O$ZaO$[bO$]cO$^dO$_eO$`fO$agO$bhO$ciO$djO$ekO$flO$gmO~O!s!yO~P.eO$V!zO~O]!}O^!{O_!{OY#pPZ#pPj#pPk#pPl#pPm#pPn#pPo#pPp#pPq#pPr#pPs#pPt#pP!s#pP#v#pP#w#pP$S#pP$V#pP$X#pP$Y#pP$Z#pP$[#pP$]#pP$^#pP$_#pP$`#pP$a#pP$b#pP$c#pP$d#pP$e#pP$f#pP$g#pP~O!s#VO~O!O#WO~Oh#YOg!Vai!Va!P!Va!R!Va!X!Va!Y!Va!]!Va!j!Va!l!Va!m!Va!n!Va!o!Va#v!Va#w!Va#x!Va#y!Va#z!Va#{!Va$P!Va$W!Va$h!Va$T!Va~O$V#ZO~OV![O!O#[O~O}#_O!P#_O!Q!XO!R!XO!j#`O!l#`O!m#`O!n#`O!o#`O~O|#cO!`#aOg!^Xh!^Xi!^X!P!^X!R!^X!X!^X!Y!^X!]!^X!j!^X!l!^X!m!^X!n!^X!o!^X#v!^X#w!^X#x!^X#y!^X#z!^X#{!^X$P!^X$W!^X$h!^X$T!^X~O|#cOg!aXh!aXi!aX!P!aX!R!aX!X!aX!Y!aX!]!aX!j!aX!l!aX!m!aX!n!aX!o!aX#v!aX#w!aX#x!aX#y!aX#z!aX#{!aX$P!aX$W!aX$h!aX$T!aX~O!O#gO~Og#iOh#jO$T#iOi!Ta!P!Ta!R!Ta!X!Ta!Y!Ta!]!Ta!j!Ta!l!Ta!m!Ta!n!Ta!o!Ta#v!Ta#w!Ta#x!Ta#y!Ta#z!Ta#{!Ta$P!Ta$W!Ta$h!Ta~O!O#kO~O|#lO~O|#oO~O|#sO~O!PqO!RqO!XqO!YqO!]#wO$h#yO~O$W$OO~O$T$PO~O|$QO$W$SO~O$W$TO~P,tOg#|Xh#|Xi#|X!P#|X!j#|X!l#|X!m#|X!n#|X!o#|X#v#|X#w#|X#x#|X#y#|X#z#|X#{#|X$W#|X~O$T$UO~P<[O!s$WO~P.eO$V$XO~OY#pXZ#pXj#pXk#pXl#pXm#pXn#pXo#pXp#pXq#pXr#pXs#pXt#pX!s#pX#v#pX#w#pX$S#pX$V#pX$X#pX$Y#pX$Z#pX$[#pX$]#pX$^#pX$_#pX$`#pX$a#pX$b#pX$c#pX$d#pX$e#pX$f#pX$g#pX~O`$ZOa$ZO~P=sO^!{O_!{O~P=sO$T$cO~P,tO$W$dO~O!O$fO~Oh$gOg![Xi![X!P![X!R![X!X![X!Y![X!]![X!j![X!l![X!m![X!n![X!o![X#v![X#w![X#x![X#y![X#z![X#{![X$P![X$W![X$h![X$T![X~O$V$hO~OV$iO!O#WO!k$jO!q$kO!s$lO~O|#cO!`$mOg!^ah!^ai!^a!P!^a!R!^a!X!^a!Y!^a!]!^a!j!^a!l!^a!m!^a!n!^a!o!^a#v!^a#w!^a#x!^a#y!^a#z!^a#{!^a$P!^a$W!^a$h!^a$T!^a~O}$oOg!dXh!dXi!dX!P!dX!R!dX!X!dX!Y!dX!]!dX!j!dX!l!dX!m!dX!n!dX!o!dX#v!dX#w!dX#x!dX#y!dX#z!dX#{!dX$P!dX$T!dX$W!dX$h!dX~O$T$pOg!eah!eai!ea!P!ea!R!ea!X!ea!Y!ea!]!ea!j!ea!l!ea!m!ea!n!ea!o!ea#v!ea#w!ea#x!ea#y!ea#z!ea#{!ea$P!ea$W!ea$h!ea~O$T$pOg!bah!bai!ba!P!ba!R!ba!X!ba!Y!ba!]!ba!j!ba!l!ba!m!ba!n!ba!o!ba#v!ba#w!ba#x!ba#y!ba#z!ba#{!ba$P!ba$W!ba$h!ba~Og#iOh#jO$T#iO$W$qO~O}$sO~O$T$tOg!uah!uai!ua!P!ua!R!ua!X!ua!Y!ua!]!ua!j!ua!l!ua!m!ua!n!ua!o!ua#v!ua#w!ua#x!ua#y!ua#z!ua#{!ua$P!ua$W!ua$h!ua~O}!XO!P!XO!Q!XO!R!XOg!{Xh!{Xi!{X!X!{X!Y!{X!]!{X!j!{X!l!{X!m!{X!n!{X!o!{X#v!{X#w!{X#x!{X#y!{X#z!{X#{!{X$P!{X$T!{X$W!{X$h!{X~O$T$uOg!yah!yai!ya!P!ya!R!ya!X!ya!Y!ya!]!ya!j!ya!l!ya!m!ya!n!ya!o!ya#v!ya#w!ya#x!ya#y!ya#z!ya#{!ya$P!ya$W!ya$h!ya~O}!XO!P!XO!Q!XO!R!XOg#OXh#OXi#OX!X#OX!Y#OX!]#OX!j#OX!l#OX!m#OX!n#OX!o#OX#v#OX#w#OX#x#OX#y#OX#z#OX#{#OX$P#OX$T#OX$W#OX$h#OX~O$T$vOg!|ah!|ai!|a!P!|a!R!|a!X!|a!Y!|a!]!|a!j!|a!l!|a!m!|a!n!|a!o!|a#v!|a#w!|a#x!|a#y!|a#z!|a#{!|a$P!|a$W!|a$h!|a~OU$wO~P*eO!k$zO~O!]${O$h#yO~O!PqO!RqO!XqO!YqO!]#wO~O[$}O$W#ca~P!#}O$W%SO~P;]O$W%TO~Oe{Of{Og#Qqh#Qqi#Qq!P#Qq!j#Qq!l#Qq!m#Qq!n#Qq!o#Qq#v#Qq#w#Qq#x#Qq#y#Qq#z#Qq#{#Qq$P#Qq$W#Qq$T#Qq~O$T%WO$W%XO~Oe{Of{Og#mqh#mqi#mq!P#mq!j#mq!l#mq!m#mq!n#mq!o#mq#v#mq#w#mq#x#mq#y#mq#z#mq#{#mq$P#mq$W#mq$T#mq~O$W%YO~P,tO$T%[O~P<[O#u%]O$W%`O~OY#paZ#paj#pak#pal#pam#pan#pao#pap#paq#par#pas#pat#pa!s#pa#v#pa#w#pa$S#pa$X#pa$Y#pa$Z#pa$[#pa$]#pa$^#pa$_#pa$`#pa$a#pa$b#pa$c#pa$d#pa$e#pa$f#pa$g#pa~O$V$XO~P!(WO`%bOa%bO$V#pa~P!(WOg!POi!PO!P!TO!j!TO!l!TO!m!TO!n!TO!o!TO#v!QO#w!QO#x#oq#y#oq#z#oq#{#oq$P#oq$W#oq~Oh#oq~P!*rOg#oqh#oqi#oq~P!*xOh!OO~P!*rO$P#oq$W#oq~P%aOg#oqh#oqi#oq!P#oq!j#oq!l#oq!m#oq!n#oq!o#oq#x#oq#y#oq#z#oq#{#oq~O#v!QO#w!QO$P#oq$W#oq~P!,mO!O%cO~O$W%dO~O!O%fO~O$V%gO~O$T$pOg!eih!eii!ei!P!ei!R!ei!X!ei!Y!ei!]!ei!j!ei!l!ei!m!ei!n!ei!o!ei#v!ei#w!ei#x!ei#y!ei#z!ei#{!ei$P!ei$W!ei$h!ei~O!O%hO~O|#cO~Og#iO$T#iOh!fii!fi!P!fi!R!fi!X!fi!Y!fi!]!fi!j!fi!l!fi!m!fi!n!fi!o!fi#v!fi#w!fi#x!fi#y!fi#z!fi#{!fi$P!fi$W!fi$h!fi~O|%jO!O%jO~O|%oO$j%qO$k%rO$l%sO~O[$}O$W#ci~O$i%uO~O$W#ci~P!#}O!k%xO~O!]${O$W#ci~O$W%zO~P;]O!]${O$W%zO$h#yO~O$W%|O~O|%}O~O$W&OO~P,tO$T&QO$W&RO~O$V$XOY#piZ#pij#pik#pil#pim#pin#pio#pip#piq#pir#pis#pit#pi!s#pi#v#pi#w#pi$S#pi$X#pi$Y#pi$Z#pi$[#pi$]#pi$^#pi$_#pi$`#pi$a#pi$b#pi$c#pi$d#pi$e#pi$f#pi$g#pi~O$T&TO~O$W&UO~O!O&VO~O$V&WO~Og#iOh#jO$T#iO!]#fi$h#fi$W#fi~O!]${O$W#cq~O$W#cq~P!#}O[$}O!]&ZO$W#cq~Oe{Of{Og#Q!Rh#Q!Ri#Q!R!P#Q!R!j#Q!R!l#Q!R!m#Q!R!n#Q!R!o#Q!R#v#Q!R#w#Q!R#x#Q!R#y#Q!R#z#Q!R#{#Q!R$P#Q!R$W#Q!R$T#Q!R~Oe{Of{Og#m!Rh#m!Ri#m!R!P#m!R!j#m!R!l#m!R!m#m!R!n#m!R!o#m!R#v#m!R#w#m!R#x#m!R#y#m!R#z#m!R#{#m!R$P#m!R$W#m!R$T#m!R~O$W&^O~P,tO#u%]O$W&`O~O!O&aO~O$W&bO~O|&cO~O!]${O$W#cy~O[$}O$W#cy~OU$wO~O!]&ZO$W#cy~O$T&fO~O$W&gO~O!]${O$W#c!R~O!O&iO~O$T&jO~O!O&kO~O$W&lO~OP!cOQ!bOR!eOS!dOT!dOW&mOX!jOb!lOc!mOd!nO|!aO$V!hO~O!]&nO$Txa~P+]O!]&nO$TxX~P#hOg&xOi&xO!P&|O!j&|O!l&|O!m&|O!n&|O!o&|O#v&yO#w&yO#x#oq#y#oq#z#oq#{#oq$T#oq~Oh#oq~P!=dOg#oqh#oqi#oq~P!=jOh&wO~P!=dOg&xOh&wOi&xO!P&|O!j&|O!l&|O!m&|O!n&|O!o&|O#v&yO#w&yO#x&zO#y&zO#z&zO#{&{O~O$T#oq~P!?QO#v&yO#w&yO$T#oq~P!,mO",goto:"0v$PPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPP$Q%P%h&W&ZPPPPPP&r'U'f't(VPP(f(nP(w(|P(w(w)P)Y(w)b)s)s)|PPPPPP)|P)sP(w(w*V*](w(w*d*g(w*m*p*v+i,O,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,z-T-h-t.^.a.a.a.d.s+i.v+i/]0R0d0m0pPPPPPPP+i+i+i[WOR|!z$U%[Q$]#OQ$^#PS$_#Q&sQ$`#RQ$a#SQ$b#TQ&}&qQ'O&rQ'P&tQ'Q&uQ'R&vR'S!Vt^O|!V!z#O#P#Q#R#S#T$U%[&q&r&s&t&u&vRxRjQOR|!V!z#O#P#Q#R#S#T$U%[S!sz$PQ#|!t]&p&q&r&s&t&u&vRpPQoP^!gu!h#i#j#w${&nQ#X!YS#p!m$uT#t!n$vQwQQ#x!sQ$|#{Q%Q#|Q%y%PR&o&p[vQ!s#{#|%P&p]!pw#x$|%Q%y&oitQw!s#x#{#|$|%P%Q%y&o&phsQw!s#x#{#|$|%P%Q%y&o&pR!`tkrQtw!s#x#{#|$|%P%Q%y&o&pQ!^rV#]!_#Y$gQ#^!_Q$e#YR%e$gV!ou#w&nR#b!bQ#e!bQ#f!cR$n#bU#d!b!c#bR%i$pU!iu#w&nQ#h!hQ$q#iQ$r#jR%v${_!gu!h#i#j#w${&n_!fu!h#i#j#w${&nQ#n!kR&h&mS#m!k&mR%k$tR#r!mQ#q!mR%l$uR#v!nQ#u!nR%m$vj^O#O#P#Q#R#S#T&q&r&s&t&u&vQyRQ!x|Q#U!VQ$V!zQ%Z$UR&P%[w]OR|!V!z#O#P#Q#R#S#T$U%[&q&r&s&t&u&vwTOR|!V!z#O#P#Q#R#S#T$U%[&q&r&s&t&u&vwSOR|!V!z#O#P#Q#R#S#T$U%[&q&r&s&t&u&vQ!uzQ#}!tR%V$PS#{!s#|W$y#x#z%Q%RQ%t$xQ%{%SR&Y%zQ%P#{Q%t$yQ&[%{R&d&YQ#z!sS$x#x%QQ%O#{Q%R#|S%w$|%PS&X%y%{R&e&[R%p$wR%n$wQ}VQ%U$OQ%Y$TQ&]%|R&^&OR$R!wwVOR|!V!z#O#P#Q#R#S#T$U%[&q&r&s&t&u&vQ#O!OQ#P!PQ#Q!QQ#R!RQ#S!SQ#T!TQ&q&wQ&r&xQ&s&yQ&t&zQ&u&{R&v&|h!|!O!P!Q!R!S!T&w&x&y&z&{&|R$[!}Q$Y!{Q%a$ZR&S%bR%^$XQ%_$XR&_&Q",nodeNames:"âš  Json Logfmt Unpack Pattern Regexp Unwrap Ip LabelFormat LineFormat LabelReplace Vector Offset Bool On Ignoring GroupLeft GroupRight Decolorize Drop Keep By Without And Or Unless Sum Avg Count Max Min Stddev Stdvar Bottomk Topk Sort Sort_Desc LineComment LogQL Expr LogExpr Selector Matchers Matcher Identifier Eq String Neq Re Nre PipelineExpr PipelineStage LineFilters LineFilter Filter PipeExact PipeMatch FilterOp OrFilter Pipe LogfmtParser LogfmtParserFlags ParserFlag LabelParser JsonExpressionParser LabelExtractionExpressionList LabelExtractionExpression LogfmtExpressionParser LabelFilter IpLabelFilter UnitFilter DurationFilter Gtr Duration Gte Lss Lte Eql BytesFilter Bytes NumberFilter Number LineFormatExpr LabelFormatExpr LabelsFormat LabelFormatMatcher DecolorizeExpr DropLabelsExpr DropLabels DropLabel KeepLabelsExpr KeepLabels KeepLabel MetricExpr RangeAggregationExpr RangeOp CountOverTime Rate RateCounter BytesOverTime BytesRate AvgOverTime SumOverTime MinOverTime MaxOverTime StddevOverTime StdvarOverTime QuantileOverTime FirstOverTime LastOverTime AbsentOverTime LogRangeExpr Range OffsetExpr UnwrapExpr ConvOp BytesConv DurationConv DurationSecondsConv Grouping Labels VectorAggregationExpr VectorOp BinOpExpr BinOpModifier OnOrIgnoringModifier GroupingLabels GroupingLabelList GroupingLabel LabelName Add Sub Mul Div Mod Pow LiteralExpr LabelReplaceExpr VectorExpr",maxTerm:166,skippedNodes:[0,37],repeatNodeCount:0,tokenData:"5b~RvX^#ipq#iqr$^rs$qst%cuv%nxy%syz%xz{%}{|&S|}&X}!O&^!O!P(l!P!Q)l!Q!R)q!R![+X![!]2X!^!_2m!_!`2z!`!a3a!c!}3n!}#O4U#P#Q4Z#Q#R4`#R#S3n#S#T4e#T#o3n#o#p4q#p#q4v#q#r5]#y#z#i$f$g#i#BY#BZ#i$IS$I_#i$I|$JO#i$JT$JU#i$KV$KW#i&FU&FV#i~#nY$R~X^#ipq#i#y#z#i$f$g#i#BY#BZ#i$IS$I_#i$I|$JO#i$JT$JU#i$KV$KW#i&FU&FV#i~$aQ!_!`$g#r#s$l~$lO!P~~$qO!R~~$tUOY$qZr$qrs%Ws#O$q#O#P%]#P~$q~%]O!O~~%`PO~$q~%hQu~OY%cZ~%c~%sO#z~~%xO$V~~%}O$W~~&SO#x~~&XO#v~~&^O$T~~&cP#w~}!O&f~&iQ#_#`&o#g#h'|~&rP#X#Y&u~&xP#X#Y&{~'OP#d#e'R~'UP}!O'X~'[P#X#Y'_~'bP#a#b'e~'hP#d#e'k~'nP#h#i'q~'tP#m#n'w~'|O!`~~(PP#h#i(S~(VP#f#g(Y~(]P#]#^(`~(cP#V#W(f~(iP#h#i'w~(oP!Q![(r~(wR!s~!Q![(r!g!h)Q#X#Y)Q~)TR{|)^}!O)^!Q![)d~)aP!Q![)d~)iP!s~!Q![)d~)qO#y~~)ve!s~!O!P(r!Q![+X!g!h,l!i!j-Z!m!n-Z!o!p-Z!r!s-Z!v!w-Z#U#V-O#W#X-d#X#Y/f#Z#[/x#[#]-{#_#`/x#a#b0R#d#e/x#g#h/T#h#i/x#k#l0d#l#m1m#m#n1O~+^d!s~!O!P(r!Q![+X!g!h,l!i!j-Z!m!n-Z!o!p-Z!r!s-Z!v!w-Z#U#V-O#W#X-d#X#Y/f#Z#[/x#[#]-{#_#`/x#a#b0R#d#e/x#g#h/T#h#i/x#k#l0d#m#n1O~,oT{|)^}!O)^!Q![)d!d!e-O#]#^-T~-TO!q~~-WP#U#V-O~-^Q!d!e-O#]#^-T~-iP!k~!Q![-l~-oS!Q![-l#[#]-{#a#b.a#g#h/T~.QP!k~!Q![.T~.WR!Q![.T#a#b.a#g#h/T~.fQ!k~!Q![.l#g#h/O~.oR!Q![.l#a#b.x#g#h/T~.{P#g#h/O~/TO!k~~/YP!k~!Q![/]~/`Q!Q![/]#a#b.x~/iT{|)^}!O)^!Q![)d#U#V-O#]#^-T~/{Q#U#V-O#]#^-T~0WS!k~!Q![.l#U#V-O#]#^-T#g#h/O~0iP!k~!Q![0l~0oT!Q![0l#W#X-d#[#]-{#a#b.a#g#h/T~1TP!k~!Q![1W~1ZU!Q![1W#W#X-d#[#]-{#a#b.a#g#h/T#k#l0d~1pR!Q![1y!c!i1y#T#Z1y~2OR!s~!Q![1y!c!i1y#T#Z1yP2^T|P!Q![2X![!]2X!c!}2X#R#S2X#T#o2X~2rP!m~!_!`2u~2zO!n~~3PQ}~!_!`3V#r#s3[~3[O!o~~3aO!Q~~3fP!j~!_!`3i~3nO!l~R3uT|P#uQ!Q![3n![!]2X!c!}3n#R#S3n#T#o3n~4ZO$h~~4`O$i~~4eO#{~~4hRO#S4e#S#T%W#T~4e~4vO$S~~4{Q!]~!_!`5R#r#s5W~5WO!X~~5]O!Y~~5bO$U~",tokenizers:[0,1],topRules:{LogQL:[0,38]},specialized:[{term:44,get:(e,t)=>(e=>$t[e.toLowerCase()]||-1)(e)<<1},{term:44,get:(e,t)=>(e=>wt[e.toLowerCase()]||-1)(e)<<1|1},{term:44,get:e=>kt[e]||-1}],tokenPrec:0}),Tt=46,Xt=53,Rt=54,_t=55,Et=56,Dt=57,jt=58;function Vt(e){const t=[];let r=e;do{const e=r.getChild(Tt);e&&!r.getChild(Dt)&&t.push(e),r=r.getChild(jt)}while(null!=r);return t}function At(e=""){const t=[],r=function(e,t){const r=[];return St.parse(e).iterate({enter:e=>{(void 0===t||t.includes(e.type.id))&&r.push(e.node)}}),r}(e,[Xt]);for(const a of r){var i,s;const r=null===(i=a.getChild(Rt))||void 0===i?void 0:i.getChild(_t),o=null===(s=a.getChild(Rt))||void 0===s?void 0:s.getChild(Et),l=Vt(a);if((r||o)&&l.length)for(const r of l){const i=e.substring(r.from,r.to).trim(),s="`"===i[0],a=i.substring(1,i.length-1);if(!a)continue;let l="";l=o?s?a:a.replace(/\\\\/g,"\\"):(0,n.escapeRegExp)(a),l&&t.push(l)}}return t}function Ct(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function qt(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},i=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(i=i.concat(Object.getOwnPropertySymbols(r).filter((function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable})))),i.forEach((function(t){Ct(e,t,r[t])}))}return e}function It(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);r.push.apply(r,i)}return r}(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))})),e}function zt(e,t){if(null==e)return{};var r,i,n=function(e,t){if(null==e)return{};var r,i,n={},s=Object.keys(e);for(i=0;i<s.length;i++)r=s[i],t.indexOf(r)>=0||(n[r]=e[r]);return n}(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(i=0;i<s.length;i++)r=s[i],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function Lt(e,t){const{meta:r}=e,i=zt(e,["meta"]),n=qt({},r,t);return It(qt({},i),{meta:n})}function Ft(t,r,i){return t.map((t=>function(t,r,i){var s;const a=qt({},null===(s=t.meta)||void 0===s?void 0:s.custom);(function(e){var t,r;return(null!==(r=null===(t=e.fields.find((e=>"labels"===e.name)))||void 0===t?void 0:t.values)&&void 0!==r?r:[]).some((e=>void 0!==e.__error__))})(t)&&(a.error="Error when parsing some of the logs");const o=Lt(t,{preferredVisualisationType:"logs",limit:null==r?void 0:r.maxLines,searchWords:void 0!==r?At(r.expr):void 0,custom:a}),l=function(t,r){if(!r.length)return[];const i=(0,n.groupBy)(r,"name"),s=Object.values(i).map(Qe),a=t.fields.find((t=>t.type===e.FieldType.string));if(void 0===a)throw new Error("invalid logs-dataframe, string-field missing");const o=t.fields.find((t=>t.type===e.FieldType.other&&"labels"===t.name));for(let e=0;e<a.values.length;e++)for(const t of s)if("label"===i[t.name][0].matcherType&&o){const r=o.values[e];if(r){const e=Object.keys(r).find((e=>i[t.name][0].matcherRegex===e));if(e){t.values.push(r[e]);continue}}t.values.push(null)}else if("regex"===i[t.name][0].matcherType||void 0===i[t.name][0].matcherType){const r=a.values[e].match(i[t.name][0].matcherRegex);if(r&&r[1]){t.values.push(r[1]);continue}t.values.push(null)}else t.values.push(null);return s}(o,i);return It(qt({},o),{fields:[...o.fields,...l]})}(t,void 0!==t.refId?r.get(t.refId):void 0,i)))}function Bt(e){const t={preferredVisualisationType:"graph"};return e.map((e=>Lt(e,t)))}function Ut(t,r,i,n){const{data:s,errors:a}=t,o=zt(t,["data","errors"]),l=s.map((t=>{if(!(0,e.isDataFrame)(t))throw new Error("transformation only supports dataframe responses");return t.fields.some((e=>e.values.length>n))?It(qt({},t),{length:n,fields:t.fields.map((e=>It(qt({},e),{values:e.values.slice(0,n)})))}):t})),u=new Map(r.map((e=>[e.refId,e]))),{streamsFrames:h,metricInstantFrames:c,metricRangeFrames:d}=function(t,r){const i=[],n=[],s=[];return t.forEach((t=>{var a;!function(t){return t.fields.every((t=>t.type===e.FieldType.time||t.type===e.FieldType.number))}(t)?i.push(t):null!=t.refId&&(null===(a=r.get(t.refId))||void 0===a?void 0:a.queryType)===$.Instant?n.push(t):s.push(t)})),{streamsFrames:i,metricInstantFrames:n,metricRangeFrames:s}}(l,u),p=a&&a.map((e=>function(e,t){if(void 0===e)return e;const{refId:r,message:i}=e;if(void 0===r||void 0===i)return e;const n=t.get(r);return void 0===n?e:i.includes("escape")&&n.expr.includes("\\")?It(qt({},e),{message:`${i}. Make sure that all special characters are escaped with \\. For more information on escaping of special characters visit LogQL documentation at https://docs.victoriametrics.com/victorialogs/logsql/.`}):e}(e,u))).filter((e=>void 0!==e));return It(qt({},o),{errors:p,data:[...Bt(d),...(f=c,f.length>0?$e(f):[]),...Ft(h,u,i)]});var f}const Nt=/[*+?()|\\.\[\]{}^$]/g;function Wt(e){return!(!e||!e.includes("=~")&&!e.includes("!~"))}function Gt(e){return e.replace(/\\/g,"\\\\").replace(/\n/g,"\\n").replace(/"/g,'\\"')}function Yt(e,t){return Wt(t)?function(e){return Gt(e.replace(Nt,"\\$&"))}(e):Gt(e)}function Mt(e,t,r){return e.includes(`${t}:${r}`)}const Zt=(e,t,r,i)=>`${e} ${i} ${t}:${r}`,Ht=[e=>`$${e}`,(e,t)=>`[[${e}${t?`:${t}`:""}]]`,(e,t)=>`\${${e}${t?`:${t}`:""}}`],Jt=/\$(\w+)|\[\[([\s\S]+?)(?::(\w+))?]]|\${(\w+)(?:\.([^:^}]+))?(?::([^}]+))?}/g;function Kt(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function er(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},i=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(i=i.concat(Object.getOwnPropertySymbols(r).filter((function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable})))),i.forEach((function(t){Kt(e,t,r[t])}))}return e}function tr(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);r.push.apply(r,i)}return r}(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))})),e}class rr extends A.DataSourceWithBackend{query(e){const t=e.targets.filter((e=>e.expr)).map((t=>{if(!/_time/.test(t.expr)){const r=`_time:[${e.range.from.toISOString()}, ${e.range.to.toISOString()}]`;t.expr=`${r} AND (${t.expr})`}var r;return tr(er({},t),{maxLines:null!==(r=t.maxLines)&&void 0!==r?r:this.maxLines})})),r=tr(er({},e),{targets:t});return this.runQuery(r)}runQuery(e){return super.query(e).pipe(xe((t=>Ut(t,e.targets,[],this.maxLines))))}toggleQueryFilter(e,t){var r,i,n;let s=null!==(n=e.expr)&&void 0!==n?n:"";if(!(null===(r=t.options)||void 0===r?void 0:r.key)||!(null===(i=t.options)||void 0===i?void 0:i.value))return tr(er({},e),{expr:s});const a=t.type===w.FILTER_FOR,o=t.type===w.FILTER_OUT,l=Yt(t.options.value),u=Mt(s,t.options.key,l),h=t.type===w.FILTER_FOR?"AND":"NOT";return u&&(s=((e,t,r)=>{const i=e.split(" "),n=i.findIndex((e=>e.includes(`${t}:${r}`)));return((e,t,r)=>{if(t<0||t>=e.length)return e;if(r){const r=0===t;e.splice(r?t:t-1,r?1:2)}else e.splice(t,1);return e})(i,n,["AND","NOT"].includes(i[n-1])).join(" ")})(s,t.options.key,l)),(a&&!u||o)&&(s=Zt(s,t.options.key,l,h)),tr(er({},e),{expr:s})}queryHasFilter(e,t){var r;return Mt(null!==(r=e.expr)&&void 0!==r?r:"",t.key,t.value)}applyTemplateVariables(e,t,r){const i=t||{},{__auto:n,__interval:s,__interval_ms:a,__range:o,__range_s:l,__range_ms:u}=i,h=function(e,t){if(null==e)return{};var r,i,n=function(e,t){if(null==e)return{};var r,i,n={},s=Object.keys(e);for(i=0;i<s.length;i++)r=s[i],t.indexOf(r)>=0||(n[r]=e[r]);return n}(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(i=0;i<s.length;i++)r=s[i],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}(i,["__auto","__interval","__interval_ms","__range","__range_s","__range_ms"]),c=this.addAdHocFilters(e.expr,r),d=tr(er({},h),{__interval:{value:"$__interval"},__interval_ms:{value:"$__interval_ms"}});return tr(er({},e),{legendFormat:this.templateSrv.replace(e.legendFormat,h),expr:this.templateSrv.replace(c,d,this.interpolateQueryExpr)})}addAdHocFilters(e,t){if(!t)return e;let r=function(e){return e.replace(Jt,((e,t,r,i,n,s,a)=>{const o=i||a;let l=t,u="0";return r&&(l=r,u="1"),n&&(l=n,u="2"),`__V_${u}__`+l+"__V__"+(o?"__F__"+o+"__F__":"")}))}(e);return r=t.reduce(((e,t)=>{const{key:r,operator:i}=t;let{value:n}=t;return n=Wt(i)?ir(n):Yt(n,i),Zt(e,r,i,n)}),r),function(e){return e.replace(/__V_(\d)__(.+?)__V__(?:__F__(\w+)__F__)?/g,((e,t,r,i)=>Ht[parseInt(t,10)](r,i)))}(r)}interpolateQueryExpr(e,t){return t.multi||t.includeAll?"string"==typeof e?nr(e):(0,n.map)(e,nr).join("|"):ir(e)}constructor(e,t=(0,A.getTemplateSrv)()){super(e),Kt(this,"templateSrv",void 0),Kt(this,"maxLines",void 0),this.templateSrv=t;const r=e.jsonData||{};var i;this.maxLines=parseInt(null!==(i=r.maxLines)&&void 0!==i?i:"0",10)||1e3,this.annotations={QueryEditor:E}}}function ir(e){return"string"==typeof e?e.replace(/'/g,"\\\\'"):e}function nr(e){return"string"==typeof e?ir(e.replace(/\\/g,"\\\\\\\\").replace(/[$^*{}\[\]+?.()|]/g,"\\\\$&")):e}const sr=new e.DataSourcePlugin(rr).setQueryEditor(V).setConfigEditor((e=>{const{options:t,onOptionsChange:i}=e;return r().createElement(r().Fragment,null,r().createElement(F,null),r().createElement(s.DataSourceHttpSettings,{defaultUrl:"http://localhost:8428",dataSourceConfig:t,onChange:i,sigV4AuthToggleEnabled:A.config.sigV4AuthEnabled}),r().createElement(z,{options:t,onOptionsChange:i}),r().createElement(B,{maxLines:t.jsonData.maxLines||"",onMaxLinedChange:e=>i(G(t,e))}))}))})(),u})()));
//# sourceMappingURL=module.js.map